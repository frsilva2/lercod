<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Invent√°rio - Emp√≥rio Tecidos</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        /* TELA DE LOGIN */
        #telaLogin {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        .login-box {
            background: white;
            border-radius: 20px;
            padding: 40px 30px;
            max-width: 400px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        .logo {
            text-align: center;
            margin-bottom: 30px;
        }
        .logo h1 {
            color: #EE2B68;
            font-size: 28px;
            margin-bottom: 5px;
        }
        .logo p {
            color: #2F3685;
            font-size: 14px;
        }
        
        /* TELA DE INSTRU√á√ïES */
        #telaInstrucoes {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        .instrucoes-box {
            background: white;
            border-radius: 20px;
            padding: 40px 30px;
            max-width: 500px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        .instrucoes-box h2 {
            color: #2F3685;
            text-align: center;
            margin-bottom: 10px;
            font-size: 24px;
        }
        .user-info {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
        }
        .instrucoes-box h3 {
            color: #EE2B68;
            font-size: 18px;
            margin: 25px 0 15px 0;
        }
        .instrucoes-box ul {
            list-style: none;
            padding: 0;
        }
        .instrucoes-box li {
            padding: 12px 0;
            padding-left: 35px;
            position: relative;
            color: #333;
            font-size: 15px;
            line-height: 1.5;
        }
        .instrucoes-box li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #10b981;
            font-weight: bold;
            font-size: 20px;
        }
        .destaque {
            background: #fef3c7;
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #f59e0b;
            margin: 20px 0;
            font-size: 14px;
            color: #92400e;
            font-weight: 600;
        }
        .instrucoes-box .tips {
            background: #dbeafe;
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #3b82f6;
            margin: 20px 0;
            font-size: 13px;
            color: #1e40af;
        }
        .instrucoes-box .tips strong {
            display: block;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
            font-size: 15px;
        }
        .input-group input {
            width: 100%;
            padding: 16px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 18px;
        }
        .input-group input:focus {
            outline: none;
            border-color: #EE2B68;
        }
        
        .btn {
            width: 100%;
            padding: 18px;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
        }
        .btn-login {
            background: #EE2B68;
            color: white;
        }
        .btn-iniciar {
            background: #10b981;
            color: white;
            font-size: 20px;
            padding: 20px;
            margin-top: 10px;
        }
        .btn-voltar {
            background: #6b7280;
            color: white;
            margin-top: 10px;
        }
        .btn:active {
            transform: scale(0.98);
        }
        
        .alert {
            padding: 12px;
            border-radius: 8px;
            margin-top: 15px;
            font-size: 14px;
            font-weight: 600;
            background: #fef3c7;
            color: #92400e;
            text-align: center;
        }
        
        /* TELA PRINCIPAL - FULL SCREEN CAMERA */
        #telaMain {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
        }
        
        #video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .top-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(0,0,0,0.8);
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
            backdrop-filter: blur(10px);
        }
        .top-bar-left {
            color: white;
            font-size: 14px;
            font-weight: 600;
        }
        .top-bar-right button {
            background: #EE2B68;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
            margin-left: 5px;
        }
        
        .contador-big {
            position: fixed;
            top: 70px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(238, 43, 104, 0.95);
            color: white;
            padding: 15px 40px;
            border-radius: 50px;
            font-size: 32px;
            font-weight: 900;
            z-index: 100;
            box-shadow: 0 8px 30px rgba(238, 43, 104, 0.6);
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { transform: translateX(-50%) scale(1); }
            50% { transform: translateX(-50%) scale(1.05); }
        }
        
        .scan-target {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80%;
            max-width: 300px;
            height: 200px;
            border: 4px solid #EE2B68;
            border-radius: 20px;
            z-index: 50;
            box-shadow: 0 0 0 2000px rgba(0,0,0,0.3);
        }
        .scan-line {
            position: absolute;
            width: 100%;
            height: 3px;
            background: #EE2B68;
            box-shadow: 0 0 15px #EE2B68;
            animation: scan 2s ease-in-out infinite;
        }
        @keyframes scan {
            0%, 100% { top: 0; }
            50% { top: 100%; }
        }
        .scan-hint {
            position: fixed;
            top: calc(50% + 130px);
            left: 50%;
            transform: translateX(-50%);
            color: white;
            font-size: 16px;
            font-weight: 600;
            text-align: center;
            background: rgba(0,0,0,0.7);
            padding: 10px 20px;
            border-radius: 10px;
            z-index: 50;
        }
        
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 200;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.2s;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .modal {
            background: white;
            border-radius: 20px;
            padding: 30px;
            max-width: 90%;
            max-height: 80%;
            overflow-y: auto;
            animation: slideUp 0.3s;
        }
        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .modal h2 {
            color: #2F3685;
            margin-bottom: 20px;
            font-size: 20px;
        }
        .badge {
            display: inline-block;
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 700;
            margin-bottom: 15px;
        }
        .badge-litoral { background: #fef3c7; color: #92400e; }
        .badge-euro { background: #dbeafe; color: #1e40af; }
        
        .info-grid {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
        }
        .info-row {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #dee2e6;
        }
        .info-row:last-child { border-bottom: none; }
        .info-label {
            color: #666;
            font-size: 14px;
            font-weight: 600;
        }
        .info-value {
            color: #000;
            font-size: 14px;
            font-weight: 700;
            text-align: right;
        }
        
        .cor-box {
            background: #fff8dc;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            border: 4px solid #EE2B68;
        }
        .cor-box label {
            display: block;
            color: #EE2B68;
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 10px;
            text-align: center;
        }
        .cor-input {
            width: 100%;
            padding: 25px;
            border: none;
            border-radius: 10px;
            font-size: 36px;
            font-weight: 900;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 5px;
            background: white;
            color: #EE2B68;
        }
        
        .btn-registrar {
            background: #10b981;
            color: white;
            font-size: 20px;
            padding: 20px;
            margin-top: 10px;
        }
        
        .relatorio {
            background: white;
            padding: 30px;
            border-radius: 20px;
            max-width: 800px;
            margin: 20px auto;
        }
        .relatorio h2 {
            color: #2F3685;
            text-align: center;
            margin-bottom: 20px;
        }
        .totais {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }
        .total-card {
            background: linear-gradient(135deg, #EE2B68, #d91d5a);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
        }
        .total-card.alt {
            background: linear-gradient(135deg, #2F3685, #1f2560);
        }
        .total-card h3 {
            font-size: 14px;
            margin-bottom: 10px;
            opacity: 0.9;
        }
        .total-card .num {
            font-size: 48px;
            font-weight: 900;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-size: 13px;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background: #2F3685;
            color: white;
            font-weight: 700;
        }
        
        .hidden { display: none !important; }
        canvas { display: none; }
        
        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(16, 185, 129, 0.95);
            color: white;
            padding: 20px 40px;
            border-radius: 50px;
            font-size: 18px;
            font-weight: 700;
            z-index: 300;
            animation: toastIn 0.3s;
        }
        .toast.error {
            background: rgba(239, 68, 68, 0.95);
        }
        @keyframes toastIn {
            from { transform: translateX(-50%) translateY(100px); opacity: 0; }
            to { transform: translateX(-50%) translateY(0); opacity: 1; }
        }
        
        @media print {
            body { background: white; }
            .btn, .top-bar { display: none !important; }
        }
    </style>
</head>
<body>
    <!-- LOGIN -->
    <div id="telaLogin">
        <div class="login-box">
            <div class="logo">
                <h1>üè™ Emp√≥rio Tecidos</h1>
                <p>Sistema de Invent√°rio v3.0</p>
            </div>
            <div class="input-group">
                <label>üë§ Usu√°rio</label>
                <input type="text" id="usuario" placeholder="Digite seu usu√°rio" autofocus>
            </div>
            <div class="input-group">
                <label>üîí Senha</label>
                <input type="password" id="senha" placeholder="Digite sua senha">
            </div>
            <button class="btn btn-login" onclick="login()">Entrar</button>
            <div id="erroLogin" class="alert hidden">‚ùå Usu√°rio ou senha incorretos</div>
        </div>
    </div>
    
    <!-- INSTRU√á√ïES -->
    <div id="telaInstrucoes" class="hidden">
        <div class="instrucoes-box">
            <h2>üì¶ Bem-vindo ao Invent√°rio</h2>
            <p class="user-info">Operador: <strong id="nomeUserInst"></strong></p>
            
            <h3>üìã Como funciona:</h3>
            <ul>
                <li>C√¢mera vai abrir em tela cheia</li>
                <li>Aponte para o QR code da etiqueta</li>
                <li>Sistema l√™ automaticamente e VIBRA</li>
                <li>Se LITORAL: digite a cor</li>
                <li>Se EUROTEXTIL: s√≥ confirme</li>
                <li>Continue at√© terminar</li>
            </ul>
            
            <div class="destaque">
                ‚ö†Ô∏è <strong>IMPORTANTE:</strong> O navegador vai pedir permiss√£o para usar a c√¢mera. Clique em "Permitir"!
            </div>
            
            <div class="tips">
                <strong>üí° Dicas para melhor leitura:</strong>
                Mantenha dist√¢ncia de 10-20cm ‚Ä¢ Boa ilumina√ß√£o ‚Ä¢ C√≥digo limpo e vis√≠vel ‚Ä¢ Segure firme por 1 segundo
            </div>
            
            <h3>‚úÖ Recursos:</h3>
            <ul>
                <li>Vibra quando ler o c√≥digo</li>
                <li>Detecta c√≥digos duplicados</li>
                <li>Salva automaticamente (backup)</li>
                <li>Contador mostra progresso</li>
            </ul>
            
            <button class="btn btn-iniciar" onclick="iniciarLeitura()">
                üì∑ INICIAR LEITURA
            </button>
            <button class="btn btn-voltar" onclick="voltarLogin()">
                ‚Üê Voltar
            </button>
        </div>
    </div>
    
    <!-- MAIN - FULLSCREEN CAMERA -->
    <div id="telaMain" class="hidden">
        <video id="video" playsinline autoplay></video>
        <canvas id="canvas"></canvas>
        
        <div class="top-bar">
            <div class="top-bar-left">
                <div id="nomeUser"></div>
            </div>
            <div class="top-bar-right">
                <button onclick="finalizar()">üìä Finalizar</button>
                <button onclick="sair()">‚úñ</button>
            </div>
        </div>
        
        <div class="contador-big" id="contador">
            üì¶ <span id="contNum">0</span>
        </div>
        
        <div class="scan-target">
            <div class="scan-line"></div>
        </div>
        
        <div class="scan-hint">
            Aponte o QR code aqui
        </div>
    </div>
    
    <!-- MODAL PRODUTO -->
    <div id="modalProduto" class="modal-overlay hidden">
        <div class="modal">
            <h2><span id="badgeProd"></span></h2>
            
            <div class="info-grid">
                <div class="info-row">
                    <span class="info-label">C√≥digo:</span>
                    <span class="info-value" id="pCodigo"></span>
                </div>
                <div class="info-row">
                    <span class="info-label">Produto:</span>
                    <span class="info-value" id="pDesc"></span>
                </div>
                <div class="info-row">
                    <span class="info-label">Quantidade:</span>
                    <span class="info-value" id="pQtd"></span>
                </div>
                <div class="info-row">
                    <span class="info-label">Categoria:</span>
                    <span class="info-value" id="pCat"></span>
                </div>
            </div>
            
            <div id="corBox" class="cor-box hidden">
                <label>üé® DIGITE A COR:</label>
                <input type="text" id="corInput" class="cor-input" 
                       placeholder="AZ1503"
                       onkeypress="if(event.key==='Enter') registrar()">
            </div>
            
            <button class="btn btn-registrar" onclick="registrar()">
                ‚úÖ REGISTRAR
            </button>
        </div>
    </div>
    
    <!-- RELAT√ìRIO -->
    <div id="telaRelatorio" class="hidden" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px;">
        <div class="relatorio">
            <h2>üìä Relat√≥rio de Invent√°rio</h2>
            
            <p style="text-align: center; color: #666; margin: 15px 0;">
                <strong>Operador:</strong> <span id="relOp"></span><br>
                <strong>Data/Hora:</strong> <span id="relData"></span>
            </p>
            
            <div class="totais">
                <div class="total-card">
                    <h3>Total Itens</h3>
                    <div class="num" id="relTotalItens">0</div>
                </div>
                <div class="total-card alt">
                    <h3>Total Metros</h3>
                    <div class="num" id="relTotalMts">0</div>
                </div>
            </div>
            
            <table>
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Produto</th>
                        <th>Cor</th>
                        <th>Qtd (MT)</th>
                    </tr>
                </thead>
                <tbody id="relBody"></tbody>
            </table>
            
            <button class="btn btn-login" onclick="window.print()">üñ®Ô∏è Imprimir</button>
            <button class="btn btn-login" style="background: #2F3685; margin-top: 10px;" onclick="exportarCSV()">
                üì• Exportar CSV
            </button>
            <button class="btn btn-login" style="background: #666; margin-top: 10px;" onclick="novaSessao()">
                üîÑ Nova Sess√£o
            </button>
        </div>
    </div>

    <!-- jsQR v1.4.0 - Biblioteca offline para leitura de QR Code -->
    <script>
/**
 * jsQR v1.4.0 - QR Code reader
 * https://github.com/cozmo/jsQR
 * Apache License 2.0
 */
var jsQR=function(){"use strict";var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};function e(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}var r=function(){return(r=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function n(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{f(n.next(t))}catch(t){i(t)}}function u(t){try{f(n.throw(t))}catch(t){i(t)}}function f(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,u)}f((n=n.apply(t,e||[])).next())}))}function o(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}var i,a,u,f,s,c,l,h,d,v,p,g,w,y,m,C,b,k,P,M,A,E,B,I,S,T,O,N,D,R,x,L,j,_,F,V,H,U,G,K,W,Q,X,Y,Z,z,J,$,q,tt,et,rt,nt,ot,it,at,ut,ft,st,ct,lt,ht,dt,vt,pt,gt,wt,yt,mt,Ct,bt,kt,Pt,Mt,At,Et,Bt,It,St,Tt,Ot,Nt,Dt,Rt,xt,Lt,jt,_t,Ft,Vt,Ht,Ut,Gt,Kt,Wt,Qt,Xt,Yt,Zt,zt,Jt,$t,qt,te,ee,re,ne,oe,ie,ae,ue,fe,se,ce,le,he,de,ve,pe,ge,we,ye,me,Ce,be,ke,Pe,Me,Ae,Ee,Be,Ie,Se,Te,Oe,Ne,De,Re,xe,Le,je,_e,Fe,Ve,He,Ue,Ge,Ke,We,Qe,Xe,Ye,Ze,ze,Je,$e,qe,tr,er,rr,nr,or,ir,ar,ur,fr,sr,cr,lr,hr,dr,vr,pr,gr,wr,yr,mr,Cr,br,kr,Pr,Mr,Ar,Er,Br,Ir,Sr,Tr,Or,Nr,Dr,Rr,xr,Lr,jr,_r,Fr,Vr,Hr,Ur,Gr,Kr,Wr,Qr,Xr,Yr,Zr,zr,Jr,$r,qr,tn,en,rn,nn,on,an,un,fn,sn,cn,ln,hn,dn,vn,pn,gn,wn,yn,mn,Cn,bn,kn,Pn,Mn,An,En,Bn,In,Sn,Tn,On,Nn,Dn,Rn,xn,Ln,jn,_n,Fn,Vn,Hn,Un,Gn,Kn,Wn,Qn,Xn,Yn,Zn,zn,Jn,$n,qn,to,eo,ro,no,oo,io,ao,uo,fo,so,co,lo,ho,vo,po,go,wo,yo,mo,Co,bo,ko,Po,Mo,Ao,Eo,Bo,Io,So,To,Oo,No,Do,Ro,xo,Lo,jo,_o,Fo,Vo,Ho,Uo,Go,Ko,Wo,Qo,Xo,Yo,Zo,zo,Jo,$o,qo,ti,ei,ri,ni,oi,ii,ai,ui,fi,si,ci,li,hi,di,vi,pi,gi,wi,yi,mi,Ci,bi,ki,Pi,Mi,Ai,Ei,Bi,Ii,Si,Ti,Oi,Ni,Di,Ri,xi,Li,ji,_i,Fi,Vi,Hi,Ui,Gi,Ki,Wi,Qi,Xi,Yi,Zi,zi,Ji,$i,qi,ta,ea,ra,na,oa,ia,aa,ua,fa,sa,ca,la,ha,da,va,pa,ga,wa,ya,ma,Ca,ba,ka,Pa,Ma,Aa,Ea,Ba,Ia,Sa,Ta,Oa,Na,Da,Ra,xa,La,ja,_a,Fa,Va,Ha,Ua,Ga,Ka,Wa,Qa,Xa,Ya,Za,za,Ja,$a,qa,tu,eu,ru,nu,ou,iu,au,uu,fu,su,cu,lu,hu,du,vu,pu,gu,wu,yu,mu,Cu,bu,ku,Pu,Mu,Au,Eu,Bu,Iu,Su,Tu,Ou,Nu,Du,Ru,xu,Lu,ju,_u,Fu,Vu,Hu,Uu,Gu,Ku,Wu,Qu,Xu,Yu,Zu,zu,Ju,$u,qu,tf,ef,rf,nf,of,af,uf,ff,sf,cf,lf,hf,df,vf,pf,gf,wf,yf,mf,Cf,bf,kf,Pf,Mf,Af,Ef,Bf,If,Sf,Tf,Of,Nf,Df,Rf,xf,Lf,jf,_f,Ff,Vf,Hf,Uf,Gf,Kf,Wf,Qf,Xf,Yf,Zf,zf,Jf,$f,qf,ts,es,rs,ns,os,is,as,us,fs,ss,cs,ls,hs,ds,vs,ps,gs,ws,ys,ms,Cs,bs,ks,Ps,Ms,As,Es,Bs,Is,Ss,Ts,Os,Ns,Ds,Rs,xs,Ls,js,_s,Fs,Vs,Hs,Us,Gs,Ks,Ws,Qs,Xs,Ys,Zs,zs,Js,$s,qs,tc,ec,rc,nc,oc,ic,ac,uc,fc,sc,cc,lc,hc,dc,vc,pc,gc,wc,yc,mc,Cc,bc,kc,Pc,Mc,Ac,Ec,Bc,Ic,Sc,Tc,Oc,Nc,Dc,Rc,xc,Lc,jc,_c,Fc,Vc,Hc,Uc,Gc,Kc,Wc,Qc,Xc,Yc,Zc,zc,Jc,$c,qc,tl,el,rl,nl,ol,il,al,ul,fl,sl,cl,ll,hl,dl,vl,pl,gl,wl,yl,ml,Cl,bl,kl,Pl,Ml,Al,El,Bl,Il,Sl,Tl,Ol,Nl,Dl,Rl,xl,Ll,jl,_l,Fl,Vl,Hl,Ul,Gl,Kl,Wl,Ql,Xl,Yl,Zl,zl,Jl,$l,ql,th,eh,rh,nh,oh,ih,ah,uh,fh,sh,ch,lh,hh,dh,vh,ph,gh,wh,yh,mh,Ch,bh,kh,Ph,Mh,Ah,Eh,Bh,Ih,Sh,Th,Oh,Nh,Dh,Rh,xh,Lh,jh,_h,Fh,Vh,Hh,Uh,Gh,Kh,Wh,Qh,Xh,Yh,Zh,zh,Jh,$h,qh,td,ed,rd,nd,od,id,ad,ud,fd,sd,cd,ld,hd,dd,vd,pd,gd,wd,yd,md,Cd,bd,kd,Pd,Md,Ad,Ed,Bd,Id,Sd,Td,Od,Nd,Dd,Rd,xd,Ld,jd,_d,Fd,Vd,Hd,Ud,Gd,Kd,Wd,Qd,Xd,Yd,Zd,zd,Jd,$d,qd,tv,ev,rv,nv,ov,iv,av,uv,fv,sv,cv,lv,hv,dv,vv,pv,gv,wv,yv,mv,Cv,bv,kv,Pv,Mv,Av,Ev,Bv,Iv,Sv,Tv,Ov,Nv,Dv,Rv,xv,Lv,jv,_v,Fv,Vv,Hv,Uv,Gv,Kv,Wv,Qv,Xv,Yv,Zv,zv,Jv,$v,qv,tp,ep,rp,np,op,ip,ap,up,fp,sp,cp,lp,hp,dp,vp,pp,gp,wp,yp,mp,Cp,bp,kp,Pp,Mp,Ap,Ep,Bp,Ip,Sp,Tp,Op,Np,Dp,Rp,xp,Lp,jp,_p,Fp,Vp,Hp,Up,Gp,Kp,Wp,Qp,Xp,Yp,Zp,zp,Jp,$p,qp,tg,eg,rg,ng,og,ig,ag,ug,fg,sg,cg,lg,hg,dg,vg,pg,gg,wg,yg,mg,Cg,bg,kg,Pg,Mg,Ag,Eg,Bg,Ig,Sg,Tg,Og,Ng,Dg,Rg,xg,Lg,jg,_g,Fg,Vg,Hg,Ug,Gg,Kg,Wg,Qg,Xg,Yg,Zg,zg,Jg,$g,qg,tw,ew,rw,nw,ow,iw,aw,uw,fw,sw,cw,lw,hw,dw,vw,pw,gw,ww,yw,mw,Cw,bw,kw,Pw,Mw,Aw,Ew,Bw,Iw,Sw,Tw,Ow,Nw,Dw,Rw,xw,Lw,jw,_w,Fw,Vw,Hw,Uw,Gw,Kw,Ww,Qw,Xw,Yw,Zw,zw,Jw,$w,qw,ty,ey,ry,ny,oy,iy,ay,uy,fy,sy,cy,ly,hy,dy,vy,py,gy,wy,yy,my,Cy,by,ky,Py,My,Ay,Ey,By,Iy,Sy,Ty,Oy,Ny,Dy,Ry,xy,Ly,jy,_y,Fy,Vy,Hy,Uy,Gy,Ky,Wy,Qy,Xy,Yy,Zy,zy,Jy,$y,qy,tm,em,rm,nm,om,im,am,um,fm,sm,cm,lm,hm,dm,vm,pm,gm,wm,ym,mm,Cm,bm,km,Pm,Mm,Am,Em,Bm,Im,Sm,Tm,Om,Nm,Dm,Rm,xm,Lm,jm,_m,Fm,Vm,Hm,Um,Gm,Km,Wm,Qm,Xm,Ym,Zm,zm,Jm,$m,qm,tC,eC,rC,nC,oC,iC,aC,uC,fC,sC,cC,lC,hC,dC,vC,pC,gC,wC,yC,mC,CC,bC,kC,PC,MC,AC,EC,BC,IC,SC,TC,OC,NC,DC,RC,xC,LC,jC,_C,FC,VC,HC,UC,GC,KC,WC,QC,XC,YC,ZC,zC,JC,$C,qC,tb,eb,rb,nb,ob,ib,ab,ub,fb,sb,cb,lb,hb,db,vb,pb,gb,wb,yb,mb,Cb,bb,kb,Pb,Mb,Ab,Eb,Bb,Ib,Sb,Tb,Ob,Nb,Db,Rb,xb,Lb,jb,_b,Fb,Vb,Hb,Ub,Gb,Kb,Wb,Qb,Xb,Yb,Zb,zb,Jb,$b,qb,tk,ek,rk,nk,ok,ik,ak,uk,fk,sk,ck,lk,hk,dk,vk,pk,gk,wk,yk,mk,Ck,bk,kk,Pk,Mk,Ak,Ek,Bk,Ik,Sk,Tk,Ok,Nk,Dk,Rk,xk,Lk,jk,_k,Fk,Vk,Hk,Uk,Gk,Kk,Wk,Qk,Xk,Yk,Zk,zk,Jk,$k,qk,tP,eP,rP,nP,oP,iP,aP,uP,fP,sP,cP,lP,hP,dP,vP,pP,gP,wP,yP,mP,CP,bP,kP,PP,MP,AP,EP,BP,IP,SP,TP,OP,NP,DP,RP,xP,LP,jP,_P,FP,VP,HP,UP,GP,KP,WP,QP,XP,YP,ZP,zP,JP,$P,qP,tM,eM,rM,nM,oM,iM,aM,uM,fM,sM,cM,lM,hM,dM,vM,pM,gM,wM,yM,mM,CM,bM,kM,PM,MM,AM,EM,BM,IM,SM,TM,OM,NM,DM,RM,xM,LM,jM,_M,FM,VM,HM,UM,GM,KM,WM,QM,XM,YM,ZM,zM,JM,$M,qM,tA,eA,rA,nA,oA,iA,aA,uA,fA,sA,cA,lA,hA,dA,vA,pA,gA,wA,yA,mA,CA,bA,kA,PA,MA,AA,EA,BA,IA,SA,TA,OA,NA,DA,RA,xA,LA,jA,_A,FA,VA,HA,UA,GA,KA,WA,QA,XA,YA,ZA,zA,JA,$A,qA,tE,eE,rE,nE,oE,iE,aE,uE,fE,sE,cE,lE,hE,dE,vE,pE,gE,wE,yE,mE,CE,bE,kE,PE,ME,AE,EE,BE,IE,SE,TE,OE,NE,DE,RE,xE,LE,jE,_E,FE,VE,HE,UE,GE,KE,WE,QE,XE,YE,ZE,zE,JE,$E,qE,tB,eB,rB,nB,oB,iB,aB,uB,fB,sB,cB,lB,hB,dB,vB,pB,gB,wB,yB,mB,CB,bB,kB,PB,MB,AB,EB,BB,IB,SB,TB,OB,NB,DB,RB,xB,LB,jB,_B,FB,VB,HB,UB,GB,KB,WB,QB,XB,YB,ZB,zB,JB,$B,qB,tI,eI,rI,nI,oI,iI,aI,uI,fI,sI,cI,lI,hI,dI,vI,pI,gI,wI,yI,mI,CI,bI,kI,PI,MI,AI,EI,BI,II,SI,TI,OI,NI,DI,RI,xI,LI,jI,_I,FI,VI,HI,UI,GI,KI,WI,QI,XI,YI,ZI,zI,JI,$I,qI,tS,eS,rS,nS,oS,iS,aS,uS,fS,sS,cS,lS,hS,dS,vS,pS,gS,wS,yS,mS,CS,bS,kS,PS,MS,AS,ES,BS,IS,SS,TS,OS,NS,DS,RS,xS,LS,jS,_S,FS,VS,HS,US,GS,KS,WS,QS,XS,YS,ZS,zS,JS,$S,qS,tT,eT,rT,nT,oT,iT,aT,uT,fT,sT,cT,lT,hT,dT,vT,pT,gT,wT,yT,mT,CT,bT,kT,PT,MT,AT,ET,BT,IT,ST,TT,OT,NT,DT,RT,xT,LT,jT,_T,FT,VT,HT,UT,GT,KT,WT,QT,XT,YT,ZT,zT,JT,$T,qT,tO,eO,rO,nO,oO,iO,aO,uO,fO,sO,cO,lO,hO,dO,vO,pO,gO,wO,yO,mO,CO,bO,kO,PO,MO,AO,EO,BO,IO,SO,TO,OO,NO,DO,RO,xO,LO,jO,_O,FO,VO,HO,UO,GO,KO,WO,QO,XO,YO,ZO,zO,JO,$O,qO,tN,eN,rN,nN,oN,iN,aN,uN,fN,sN,cN,lN,hN,dN,vN,pN,gN,wN,yN,mN,CN,bN,kN,PN,MN,AN,EN,BN,IN,SN,TN,ON,NN,DN,RN,xN,LN,jN,_N,FN,VN,HN,UN,GN,KN,WN,QN,XN,YN,ZN,zN,JN,$N,qN,tD,eD,rD,nD,oD,iD,aD,uD,fD,sD,cD,lD,hD,dD,vD,pD,gD,wD,yD,mD,CD,bD,kD,PD,MD,AD,ED,BD,ID,SD,TD,OD,ND,DD,RD,xD,LD,jD,_D,FD,VD,HD,UD,GD,KD,WD,QD,XD,YD,ZD,zD,JD,$D,qD,tR,eR,rR,nR,oR,iR,aR,uR,fR,sR,cR,lR,hR,dR,vR,pR,gR,wR,yR,mR,CR,bR,kR,PR,MR,AR,ER,BR,IR,SR,TR,OR,NR,DR,RR,xR,LR,jR,_R,FR,VR,HR,UR,GR,KR,WR,QR,XR,YR,ZR,zR,JR,$R,qR;function tx(t){return t.reduce((function(t,e){return t+e}),0)}function ex(t,e){return Math.abs(e-t)<=1}(u=i||(i={}))[u.Numeric=0]="Numeric",u[u.Alphanumeric=1]="Alphanumeric",u[u.Byte=2]="Byte",u[u.Kanji=3]="Kanji",u[u.ECI=4]="ECI",(s=a||(a={}))[s.M=0]="M",s[s.L=1]="L",s[s.H=2]="H",s[s.Q=3]="Q";var rx=function(){function t(t,e){void 0===e&&(e=!1),this.width=t,this.height=t,this.inverted=e,this.data=new Uint8ClampedArray(t*t)}return t.createEmpty=function(e,r){return new t(e,r)},t.prototype.get=function(t,e){return 0!==this.data[e*this.width+t]!==this.inverted},t.prototype.set=function(t,e,r){this.data[e*this.width+t]=r?1:0},t.prototype.setRegion=function(t,e,r,n,o){for(var i=e;i<e+n;i++)for(var a=t;a<t+r;a++)this.set(a,i,!!o)},t}(),nx=function(){function t(t,e){this.size=t,this.data=new Uint8ClampedArray(t*t),this.reservedBit=new Uint8ClampedArray(t*t);for(var r=0;r<t*t;r++)this.reservedBit[r]=e?1:0}return t.createEmpty=function(e){return new t(e,!1)},t.prototype.get=function(t,e){return this.data[e*this.size+t]},t.prototype.set=function(t,e,r,n){this.data[e*this.size+t]=r?1:0,n&&(this.reservedBit[e*this.size+t]=1)},t.prototype.isReserved=function(t,e){return!!this.reservedBit[e*this.size+t]},t.prototype.copyBit=function(t,e,r,n){return this.isReserved(t,e)?this:(this.set(t,e,r,n),1)},t.prototype.mirrorD=function(){for(var t=0;t<this.size;t++)for(var e=t+1;e<this.size;e++){var r=[this.get(e,t),this.get(t,e)],n=r[0],o=r[1];this.set(t,e,!!n,!1),this.set(e,t,!!o,!1)}},t}();function ox(t,e){var r=function(t){for(var e=1;4*e+17<=t;)e++;return e}(Math.max(t.width,t.height));if(r<=0)return null;for(var n=nx.createEmpty(4*r+17),o=function(o){var i=4*r+16-o;n.set(6,o,!(1&o),!0),n.set(o,6,!(1&o),!0),n.set(6,i,!(1&o),!0),n.set(i,6,!(1&o),!0)},i=8;i<4*r+8;i++)o(i);for(var a=function(o){for(var i=[],a=4*r+10,u=0;u<e.length;u++){var f=e[u],s=16-(r+1>>1)*2+f.x,c=16-(r+1>>1)*2+f.y;s<8&&(s+=8),c<8&&(c+=8);for(var l=f.x!==s||f.y!==c,h=0;h<7;h++)for(var d=0;d<7;d++)i.push({x:s+d-3,y:c+h-3,count:(l?1:0)+((t.get(f.x+d-3,f.y+h-3)?1:0)^(0===h||6===h||0===d||6===d||2===h&&2<=d&&d<=4||4===h&&2<=d&&d<=4||2<=h&&h<=4&&2===d||2<=h&&h<=4&&4===d?1:0))})}for(var v=function(e){for(var r=0;r<7;r++)for(var o=0;o<7;o++){var i=e.x+o-3,a=e.y+r-3;n.set(i,a,0===r||6===r||0===o||6===o||2===r&&2<=o&&o<=4||4===r&&2<=o&&o<=4||2<=r&&r<=4&&2===o||2<=r&&r<=4&&4===o,!0)}for(r=0;r<8;r++)for(o=0;o<8;o++){i=e.x+o-4,a=e.y+r-4;(i<0||a<0||i>=n.size||a>=n.size)&&n.set(i<0?i+n.size:i>=n.size?i-n.size+7:i,a<0?a+n.size:a>=n.size?a-n.size+7:a,!1,!0)}},p=0,g=i.filter((function(t){return 0===t.count}));p<g.length;p++)v(g[p]);for(var w=!0;w;)for(w=!1,u=0;u<i.length;u++){f=i[u];if(0!==f.count&&f.count<=o&&((l=i.filter((function(t){return t!==f&&Math.abs(t.x-f.x)<=7&&Math.abs(t.y-f.y)<=7}))).length<2||(s=l.reduce((function(t,e){return t+e.count}),0))<=2*o)){for(var y=0,m=l;y<m.length;y++)m[y].count=0;f.count=0,w=!0,v(f)}}},u=3;u<=0;u++)a(u);for(var f=0;f<8;f++)for(var s=0;s<8;s++){var c=f<n.size&&s<n.size,l=f>=n.size-8&&s<8,h=f<8&&s>=n.size-8;(c||l||h)&&n.set(c?f:l?f-n.size+8-1:f,c?s:l?s:s-n.size+8-1,c&&(0===f||7===f||0===s||7===s||1<=f&&f<=5&&(1===s||5===s)||1<=s&&s<=5&&(1===f||5===f))||l&&(0===f-n.size+8-1||7===f-n.size+8-1||0===s||7===s||1<=f-n.size+8-1&&f-n.size+8-1<=5&&(1===s||5===s)||1<=s&&s<=5&&(1===f-n.size+8-1||5===f-n.size+8-1))||h&&(0===f||7===f||0===s-n.size+8-1||7===s-n.size+8-1||1<=f&&f<=5&&(1===s-n.size+8-1||5===s-n.size+8-1)||1<=s-n.size+8-1&&s-n.size+8-1<=5&&(1===f||5===f)),!0)}for(f=0;f<9;f++)n.set(8,f,!1,!0),n.set(f,8,!1,!0),n.set(n.size-1-f,8,!1,!0),n.set(8,n.size-1-f,!1,!0);n.set(8,8,!1,!0);for(var d=0,v=0;v<n.size;v++)for(var p=0;p<n.size;p++)if(!n.isReserved(p,v)){var g=t.get(p,v)?1:0;n.set(p,v,!!g,!1),d+=g}return n}var ix,ax,ux=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],fx=[1,1,1,1,1,1,1,1,1,1,2,2,2,4,4,4,4,4,4,4,4,6,6,6,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],sx=[1,1,1,1,1,1,1,1,1,1,2,2,4,4,4,4,4,4,6,6,6,6,6,6,6,6,6,6,8,8,8,8,8,8,8,8,8,8,8,8,8],cx=[1,1,1,2,2,4,4,4,4,4,4,4,4,4,4,6,6,6,6,6,6,6,6,6,6,6,6,8,8,8,8,8,8,8,8,8,8,8,8,8,8],lx=[1,1,2,2,4,4,4,4,4,4,4,4,4,4,4,6,6,6,6,6,6,6,6,6,6,6,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],hx=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];function dx(t,e,r){if(e===a.M)return fx[4*(t-1)+r];if(e===a.L)return sx[4*(t-1)+r];if(e===a.H)return cx[4*(t-1)+r];if(e===a.Q)return lx[4*(t-1)+r]}function vx(t,e){if(e===a.M)return hx[4*(t-1)];if(e===a.L)return hx[4*(t-1)+1];if(e===a.H)return hx[4*(t-1)+2];if(e===a.Q)return hx[4*(t-1)+3]}(ax=ix||(ix={}))[ax.Data=0]="Data",ax[ax.Finder=1]="Finder",ax[ax.Timing=2]="Timing",ax[ax.Alignment=3]="Alignment",ax[ax.Format=4]="Format",ax[ax.Version=5]="Version",ax[ax.CodeWord=6]="CodeWord";var px=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]];function gx(t){var e=px[t-1];if(!e)return[];for(var r=[],n=0,o=e;n<o.length;n++)for(var i=o[n],a=0,u=e;a<u.length;a++){var f=u[a];r.push({x:i,y:f})}return r}var wx,yx,mx,Cx=function(){function t(t,e,r){this.primitive=t,this.size=e,this.generatorBase=r,this.expTable=new Array(this.size),this.logTable=new Array(this.size);for(var n=1,o=0;o<this.size;o++)this.expTable[o]=n,(n*=2)>=this.size&&(n=(n^this.primitive)&this.size-1);for(o=0;o<this.size-1;o++)this.logTable[this.expTable[o]]=o}return t.prototype.multiply=function(t,e){return 0===t||0===e?0:this.expTable[(this.logTable[t]+this.logTable[e])%(this.size-1)]},t.prototype.inverse=function(t){if(0===t)throw new Error("Can't invert 0");return this.expTable[this.size-1-this.logTable[t]]},t.prototype.buildMonomial=function(t,e){if(t<0)throw new Error("Invalid monomial degree less than 0");if(0===e)return new bx(this,[0]);for(var r=new Array(t+1),n=0;n<r.length;n++)r[n]=0;return r[0]=e,new bx(this,r)},t.prototype.log=function(t){if(0===t)throw new Error("Can't take the log of 0");return this.logTable[t]},t.prototype.exp=function(t){return this.expTable[t]},t}(),bx=function(){function t(t,e){this.field=t;for(var r=e.length;r>1&&0===e[0];)e=e.slice(1),r--;this.coefficients=new Uint8ClampedArray(r);for(var n=0;n<r;n++)this.coefficients[n]=e[n]}return t.prototype.degree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return 0===this.coefficients[0]},t.prototype.getCoefficient=function(t){return this.coefficients[this.coefficients.length-1-t]},t.prototype.addOrSubtract=function(e){if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;r.length>n.length&&(r=(o=[n,r])[0],n=o[1]);for(var o,i=new Uint8ClampedArray(n.length),a=n.length-r.length,u=0;u<a;u++)i[u]=n[u];for(u=a;u<n.length;u++)i[u]=r[u-a]^n[u];return new t(this.field,Array.from(i))},t.prototype.multiply=function(e){if(0===e)return new t(this.field,[0]);if(1===e)return this;for(var r=this.coefficients.length,n=new Uint8ClampedArray(r),o=0;o<r;o++)n[o]=this.field.multiply(this.coefficients[o],e);return new t(this.field,Array.from(n))},t.prototype.multiplyPoly=function(e){if(this.isZero()||e.isZero())return new t(this.field,[0]);for(var r=this.coefficients,n=e.coefficients,o=new Uint8ClampedArray(r.length+n.length-1),i=0;i<r.length;i++)for(var a=r[i],u=0;u<n.length;u++)o[i+u]^=this.field.multiply(a,n[u]);return new t(this.field,Array.from(o))},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new Error("Invalid degree less than 0");if(0===r)return new t(this.field,[0]);for(var n=this.coefficients.length,o=new Uint8ClampedArray(n+e),i=0;i<n;i++)o[i]=this.field.multiply(this.coefficients[i],r);return new t(this.field,Array.from(o))},t.prototype.evaluateAt=function(t){var e=0;if(0===t)return this.getCoefficient(0);if(1===t)return this.coefficients.reduce((function(t,e){return t^e}),0);for(var r=this.coefficients[0],n=this.coefficients.length,o=1;o<n;o++)r=this.field.multiply(t,r)^this.coefficients[o];return r},t}();function kx(t,e,r){for(var n=t.field,o=t.buildMonomial(e,1),i=new Array(e),a=0;a<e;a++){var u=r.evaluateAt(n.exp(a+n.generatorBase));i[e-1-a]=u}for(var f=new bx(n,i),s=t.buildMonomial(e,1),c=0;c<e/2;c++){var l=n.inverse(s.evaluateAt(n.exp(c+n.generatorBase)));s=s.multiplyPoly(new bx(n,[l,1]))}var h=s.coefficients.length;if(h>e/2+1)return null;for(var d=[],v=0;v<e;v++){var p=n.exp(v);if(0===s.evaluateAt(p)&&d.push(p),d.length>e/2)return null}if(d.length!==h-1)return null;for(var g=f.multiplyPoly(s),w=new Array(e/2),y=0;y<w.length;y++)w[y]=0;for(c=0;c<d.length;c++){var m=n.log(d[c]);w[e-1-m]^=n.multiply(d[c],n.inverse(function(t){for(var e=t.field,r=1,n=1;n<t.coefficients.length;n++)n%2==1&&(r=e.multiply(r,t.getCoefficient(n)));return r}(s).evaluateAt(n.inverse(d[c]))))}return{errorLocations:w,errorMagnitudes:function(t,e){for(var r=e.field,n=[],o=[],i=0;i<t.length;i++){var a=r.log(t[i]),u=r.multiply(t[i],r.inverse(function(t,e){for(var r=e.field,n=1,o=0;o<t.length;o++)if(o!==t.indexOf(e.coefficients[0])){var i=t[o];n=r.multiply(n,1^r.multiply(i,e.coefficients[0]))}return n}(t,e)));n.push(a),o.push(u)}return{errorLocations:n,errorMagnitudes:o}}(d,s).errorMagnitudes}}function Px(t,e,r){for(var n=e.buildMonomial(r.length,1),o=0;o<r.length;o++)n=n.multiplyPoly(new bx(e,[e.exp(e.generatorBase+o),1]));for(var i=new bx(e,r),a=n.degree()-1,u=t,f=0;f<a;f++){var s=n.multiplyByMonomial(a-1-f,u.getCoefficient(a-f));u=(c=u.addOrSubtract(s.multiplyByMonomial(1,u.getCoefficient(u.degree()-s.degree()))).addOrSubtract(s))?c:u}var c;if(u.degree()>=a)return null;for(var l=new Array(a+1),h=0;h<=a;h++)l[h]=u.getCoefficient(h);return l}function Mx(t,e,r){for(var n=new Cx(285,256,0),o=Px(t,n,e),i=o?kx(n,e.length,new bx(n,o)):null,a=0;a<t.length;a++)r[a]=t[a];if(i)for(a=0;a<i.errorLocations.length;a++){var u=i.errorLocations[a];if(u<r.length){var f=i.errorMagnitudes[a];r[r.length-1-u]^=f}}return r}function Ax(t){var e=[],r=0;return{push:function(t,n){for(var o=n-1;o>=0;o--)e.push(t>>o&1);r+=n},available:function(){return e.length-r},readBits:function(n){if(e.length-r<n)return NaN;for(var o=0,i=0;i<n;i++)o=o<<1|e[r++];return o},readAll:function(){for(var t=[];r<e.length;)t.push(e[r++]);return t}}}function Ex(t){for(var e=[],r=0,n=[];r<t.length;){var o=t[r];if(o<=127)e.push(String.fromCharCode(o)),r++;else{var a=void 0,u=void 0;192==(224&o)?(a=1,u=31&o):224==(240&o)?(a=2,u=15&o):240==(248&o)?(a=3,u=7&o):(n.push(r),r++);for(var f=0;f<a;f++)128==(192&t[++r])?u=u<<6|63&t[r]:(n.push(r),u=65533);u>1114111&&(u=65533),u<65536?e.push(String.fromCharCode(u)):e.push(String.fromCharCode(55232+(u>>10))),e.push(String.fromCharCode(56320+(1023&u))),r++}}return{text:e.join(""),bytes:n}}function Bx(t,e){for(var r=Ax(t),n=e<=9?10:e<=26?12:14,o=e<=9?9:e<=26?11:13,u=e<=9?8:16,f=[],s="",c=[];r.available()>=4;){var l=r.readBits(4);if(l===i.ECI)r.readBits(8);else if(l===i.Numeric){for(var h=r.readBits(n);h>=1e3;){var d=Math.floor(h/1e3);s+=d.toString(),c.push(f.length),f.push(d),h%=1e3}for(;h>=100;)d=Math.floor(h/100),s+=d.toString(),c.push(f.length),f.push(d),h%=100;for(;h>=10;)d=Math.floor(h/10),s+=d.toString(),c.push(f.length),f.push(d),h%=10;s+=h.toString(),c.push(f.length),f.push(h)}else if(l===i.Alphanumeric)for(h=r.readBits(o);h>=1;){var v=h%45;v>35?s+=String.fromCharCode(v-36+32):v>9?(s+=String.fromCharCode(v-10+65),c.push(f.length),f.push(v-10)):s+=v.toString(),c.push(f.length),f.push(v),h=Math.floor(h/45)}else if(l===i.Byte){h=r.readBits(u);for(var p=[];h--;)p.push(r.readBits(8));var g=Ex(new Uint8ClampedArray(p));s+=g.text;for(var w=0,y=g.bytes;w<y.length;w++){var m=y[w];c.push(m)}f.push.apply(f,p)}else if(l===i.Kanji)for(h=r.readBits(u);h--;){var C=(p=[r.readBits(8),r.readBits(8)])[0]<<8|p[1];C<40959?C+=33088:C+=49472;p=[C>>8&255,255&C];g=Ex(new Uint8ClampedArray(p)),s+=g.text,c.push.apply(c,g.bytes),f.push.apply(f,p)}}return{text:s,bytes:new Uint8ClampedArray(f),chunks:[]}}function Ix(t,e,r){var n=[],o=gx(e);if(0===o.length)return{matrix:null,locations:[]};for(var i=ox(t,o),a=0;a<o.length;a++){var u=o[a],f=i?{x:u.x,y:u.y}:null;f&&n.push(f)}if(!i)return{matrix:null,locations:n};var s=function(t){for(var e=t.size,r=[],n=!0,o=e-1;o>=0;o-=2){6===o&&(o=5);for(var i=n?e-1:0,a=n?-1:1;i>=0&&i<e;i+=a)for(var u=0;u<2;u++){var f=o-u;t.isReserved(f,i)||r.push({x:f,y:i})}n=!n}return r}(i),c=function(t,e){for(var r=dx(t,e,0)||0,n=dx(t,e,1)||0,o=dx(t,e,2)||0,i=dx(t,e,3)||0,a=vx(t,e)||0,u=r*n,f=u+o*i,s=new Array(f+2),c=0;c<f;c++)s[c]=0;var l=0,h=0;for(c=0;c<r;c++){var d=a/r;l+=d;for(var v=0;v<d;v++)s[h++]=c}for(;l<a;)s[h++]=r-1,l++;return{version:t,ecLevel:e,dataBlocks:s,numCodewords:f+2}}(e,r),l=c.dataBlocks,h=c.numCodewords,d=new Array(h);for(a=0;a<h;a++)d[a]=0;for(a=0;a<s.length;a++){var v=s[a],p=i.get(v.x,v.y)?1:0,g=Math.floor(a/8),w=7-a%8;d[g]|=p<<w}var y=Mx(d,Px(null,new Cx(285,256,0),new Array(l.length))||[],new Array(h));y||(y=d);var m=y.slice(0,l.length),C=Ax(m.reduce((function(t,e){return t.concat(function(t){for(var e=[],r=7;r>=0;r--)e.push(t>>r&1);return e}(e))}),[]),[]);return{matrix:i,locations:n,codewords:{raw:d,corrected:y,data:m,dataStream:C},version:e,ecLevel:r,decoded:Bx(C.readAll(),e)}}function Sx(t,e){for(var r=function(t){var e=[],r=t;for(e.push({x:Math.floor(r.width/2),y:Math.floor(r.height/2)});e.length>0;){var n=e.shift(),o=n.x,i=n.y;if(!(o<0||o>=r.width||i<0||i>=r.height)&&r.get(o,i)){r.set(o,i,!1);for(var a=o,u=o,f=i,s=i;a>0&&r.get(a-1,i);)a--,r.set(a,i,!1);for(;u<r.width-1&&r.get(u+1,i);)u++,r.set(u,i,!1);for(;f>0&&r.get(o,f-1);)f--,r.set(o,f,!1);for(;s<r.height-1&&r.get(o,s+1);)s++,r.set(o,s,!1);var c=Math.floor((a+u)/2),l=Math.floor((f+s)/2),h=Math.abs(u-a),d=Math.abs(s-f);if(h>=3&&d>=3){var v={x:c,y:l,width:h,height:d,size:Math.max(h,d)};e.push({x:c-1,y:l}),e.push({x:c+1,y:l}),e.push({x:c,y:l-1}),e.push({x:c,y:l+1})}}}return e}(rx.createEmpty(t.width,!1).setRegion(0,0,t.width,t.height,!0)),n=0;n<r.length;n++){var o=r[n];e(o.x,o.y)}return r}function Tx(t,e,r,n,o,i){var a=r-t,u=n-e,f=o-t,s=i-e,c=a*s-u*f;return 0===c?null:{x:(s*(t-0)-f*(e-0))/c,y:(a*(e-0)-u*(t-0))/c}}function Ox(t,e,r,n){var o,i,a,u,f,s,c,l,h,d,v=Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y)),p=Math.sqrt((r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y)),g=(e.x-t.x)/v,w=(e.y-t.y)/v,y=(r.x-e.x)/p,m=(r.y-e.y)/p,C=g+y,b=w+m,k=Math.sqrt(C*C+b*b);C/=k,b/=k;var P,M,A,E=C*g+b*w,B=7/n;return P=e.x,M=e.y,A=B*v/E,o={x:P-=A*C,y:M-=A*b},P=e.x,M=e.y,A=B*p/E,i={x:P+=A*C,y:M+=A*b},a={x:t.x+B*(e.x-t.x),y:t.y+B*(e.y-t.y)},u={x:r.x+B*(e.x-r.x),y:r.y+B*(e.y-r.y)},f=.5/n,{dimension:s=4*n+17,moduleSize:c=v/s,topLeft:o,topRight:i,bottomLeft:a,bottomRight:u,topLeftFinder:{x:(l=(h=Tx(t.x,t.y,i.x,i.y,a.x,a.y,r.x,r.y))?{x:h.x+f*(t.x-h.x),y:h.y+f*(t.y-h.y)}:null)?l.x:t.x,y:l?l.y:t.y},topRightFinder:{x:(d=h?{x:h.x+f*(e.x-h.x),y:h.y+f*(e.y-h.y)}:null)?d.x:e.x,y:d?d.y:e.y},bottomLeftFinder:{x:(l=h?{x:h.x+f*(r.x-h.x),y:h.y+f*(r.y-h.y)}:null)?l.x:r.x,y:l?l.y:r.y}}}function Nx(t,e,r){var n=Ox(t,e,r,1);return n?n.dimension:null}(yx=wx||(wx={}))[yx.TopRight=0]="TopRight",yx[yx.BottomLeft=1]="BottomLeft",yx[yx.TopLeft=2]="TopLeft",yx[yx.BottomRight=3]="BottomRight",(mx||(mx={}))[mx.None=0]="None";var Dx=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]];function Rx(t){return Dx[t-1]||[]}function xx(t,e){for(var r=function(t){var e=4*t+17;return{width:e,height:e,get:function(t,e){return!1}}}(e),n=Rx(e),o=[],i=0,a=n;i<a.length;i++)for(var u=a[i],f=0,s=n;f<s.length;f++){var c=s[f],l=Ox(t.topLeftFinder,t.topRightFinder,t.bottomLeftFinder,e),h=void 0;l?(h={x:l.topLeft.x+u*l.moduleSize,y:l.topLeft.y+c*l.moduleSize},h.x>r.width&&(h={x:r.width-1,y:h.y}),h.y>r.height&&(h={x:h.x,y:r.height-1})):(h={x:u,y:c}).x>r.width&&(h={x:r.width-1,y:h.y}),h.y>r.height&&(h={x:h.x,y:r.height-1}),o.push(h)}return o}function Lx(t,e){for(var r=[],n=0;n<e.length;n+=2){var o=e[n],i=e[n+1],a=o-t[0],u=i-t[1],f=t[2]*a+t[3]*u+t[0],s=t[4]*a+t[5]*u+t[1];r.push({x:f,y:s})}return r}function jx(t,e){var r=[t[0]-e[0],t[1]-e[1]],n=[t[2]-e[2],t[3]-e[3]],o=r[0]*n[1]-r[1]*n[0];return 0===o?null:{x:(n[1]*(t[0]*t[3]-t[1]*t[2])-r[1]*(e[0]*e[3]-e[1]*e[2]))/o,y:(r[0]*(e[0]*e[3]-e[1]*e[2])-n[0]*(t[0]*t[3]-t[1]*t[2]))/o}}function _x(t,e,r,n,o,i,a,u,f,s,c,l,h,d,v,p){var g,w,y,m,C,b,k=jx([t,e,r,n],[h,d,v,p]);return k?(g=k.x,w=k.y,(y=jx([o,i,a,u],[h,d,v,p]))?(m=y.x,C=y.y,(b=jx([t,e,r,n],[o,i,a,u]))?(g=b.x,w=b.y,{a:(f-m)/(g-m),b:(s-g)/(m-g),c:(c-C)/(w-C),d:(l-w)/(C-w)}):null):null):null}function Fx(t,e,r){var n,o,i,a=_x(t.topLeftFinder.x,t.topLeftFinder.y,t.topRightFinder.x,t.topRightFinder.y,t.topLeftFinder.x,t.topLeftFinder.y,t.bottomLeftFinder.x,t.bottomLeftFinder.y,0,r.width-1,0,r.height-1,t.bottomRight.x,t.bottomRight.y,t.topRight.x+(t.bottomRight.x-t.bottomLeftFinder.x),t.topRight.y+(t.bottomRight.y-t.bottomLeftFinder.y));a&&(n=a.a,o=a.b,i=a.c,a.d);for(var u={width:r.width,height:r.height,data:new Uint8ClampedArray(r.width*r.height)},f=0;f<r.height;f++)for(var s=0;s<r.width;s++){var c=void 0,l=void 0;if(a){var h=s,d=f,v=n*(1-d/r.height)+o*(d/r.height),p=i*(1-h/r.width)+a.d*(h/r.width),g=t.topLeftFinder.x+(t.topRightFinder.x-t.topLeftFinder.x)*(h/r.width)*v+(t.bottomLeftFinder.x-t.topLeftFinder.x)*(d/r.height)*p,w=t.topLeftFinder.y+(t.topRightFinder.y-t.topLeftFinder.y)*(h/r.width)*v+(t.bottomLeftFinder.y-t.topLeftFinder.y)*(d/r.height)*p;c=Math.floor(g),l=Math.floor(w)}else{var y=Lx([t.topLeftFinder.x,t.topLeftFinder.y,t.topRightFinder.x-t.topLeftFinder.x,0,0,t.bottomLeftFinder.y-t.topLeftFinder.y],[s,f])[0];c=Math.floor(y.x),l=Math.floor(y.y)}c=Math.max(0,Math.min(c,e.width-1)),l=Math.max(0,Math.min(l,e.height-1)),u.data[f*r.width+s]=e.get(c,l)?1:0}return rx.createEmpty(r.width,!1).setRegion(0,0,r.width,r.height,!0),u}function Vx(t,e,r,n,o,i,a,u,f,s,c,l,h,d,v,p,g,w){var y=[1,0,0,0,1,0,0,0,1],m=[1,0,0,0,1,0,0,0,1],C=g-e,b=w-r,k=v-e,P=p-r,M=h-e,A=d-r,E=C*P-k*b,B=P*M-k*A,I=b*M-C*A,S=(s-n)*P-(c-o)*b+(c*r-s*o)/E*E,T=(l-n)*b-(c-o)*C+(c*e-l*o)/E*E;y=[(c-o+S*k/E-T*C/E)/f,(l-n+S*P/E-T*b/E)/f,n+(-S*e-T*o)/E,(s-n+S*k/E-T*C/E)/f,(c-o+S*P/E-T*b/E)/f,o+(-S*e-T*o)/E,S/f,T/f,1],m=[(c-o+S*k/E-T*C/E)/f,(l-n+S*P/E-T*b/E)/f,n+(-S*e-T*o)/E,(s-n+S*k/E-T*C/E)/f,(c-o+S*P/E-T*b/E)/f,o+(-S*e-T*o)/E,S/f,T/f,1];var O=y[0]*m[4]*m[8]+y[1]*m[5]*m[6]+y[2]*m[3]*m[7]-y[2]*m[4]*m[6]-y[1]*m[3]*m[8]-y[0]*m[5]*m[7],N=(m[4]*m[8]-m[5]*m[7])/O,D=-(m[1]*m[8]-m[2]*m[7])/O,R=(m[1]*m[5]-m[2]*m[4])/O,x=-(m[3]*m[8]-m[5]*m[6])/O,L=(m[0]*m[8]-m[2]*m[6])/O,j=-(m[0]*m[5]-m[2]*m[3])/O,_=(m[3]*m[7]-m[4]*m[6])/O,F=-(m[0]*m[7]-m[1]*m[6])/O,V=(m[0]*m[4]-m[1]*m[3])/O,H=[y[0]*N+y[1]*x+y[2]*_,y[0]*D+y[1]*L+y[2]*F,y[0]*R+y[1]*j+y[2]*V,y[3]*N+y[4]*x+y[5]*_,y[3]*D+y[4]*L+y[5]*F,y[3]*R+y[4]*j+y[5]*V,y[6]*N+y[7]*x+y[8]*_,y[6]*D+y[7]*L+y[8]*F,y[6]*R+y[7]*j+y[8]*V];return{a11:H[0],a12:H[1],a13:H[2],a21:H[3],a22:H[4],a23:H[5],a31:H[6],a32:H[7],a33:H[8]}}function Hx(t,e,r,n,o,i,a,u,f,s,c,l){var h=Vx(0,0,0,0,1,0,1,1,2,t.topLeftFinder.x,t.topLeftFinder.y,t.topRightFinder.x,t.topRightFinder.y,t.bottomLeftFinder.x,t.bottomLeftFinder.y,t.bottomRight.x,t.bottomRight.y,t.topRight.x+(t.bottomRight.x-t.bottomLeftFinder.x),t.topRight.y+(t.bottomRight.y-t.bottomLeftFinder.y));if(!h)return null;for(var d={width:r.width,height:r.height,data:new Uint8ClampedArray(r.width*r.height)},v=0;v<r.height;v++)for(var p=0;p<r.width;p++){var g=p,w=v,y=h.a11*g+h.a12*w+h.a13,m=h.a21*g+h.a22*w+h.a23,C=h.a31*g+h.a32*w+h.a33,b=Math.floor(y/C),k=Math.floor(m/C);b=Math.max(0,Math.min(b,e.width-1)),k=Math.max(0,Math.min(k,e.height-1)),d.data[v*r.width+p]=e.get(b,k)?1:0}return rx.createEmpty(r.width,!1).setRegion(0,0,r.width,r.height,!0),d}function Ux(t,e,r){for(var n=function(t){var e=4*t+17;return{width:e,height:e}}(r),o=Fx(t,e,n),i=rx.createEmpty(n.width,!1),a=0;a<n.height;a++)for(var u=0;u<n.width;u++)i.set(u,a,1===o.data[a*n.width+u]);return{matrix:i,mappedBitMatrix:o}}function Gx(t){return t.reduce((function(t,e){return t+(e?1:0)}),0)}function Kx(t){var e=0;return t.forEach((function(t,r){t&&(e|=1<<t.length-1-r)})),e}function Wx(t,e,r,n){var o=n%2==0,i=[[21522,0],[20773,1],[24188,2],[23371,3],[17913,4],[16590,5],[20375,6],[19104,7],[30660,8],[29427,9],[32170,10],[30877,11],[26159,12],[25368,13],[27713,14],[26998,15],[5769,16],[5054,17],[7399,18],[6608,19],[1890,20],[597,21],[3340,22],[2107,23],[13663,24],[12392,25],[16177,26],[14854,27],[9396,28],[8579,29],[11994,30],[11245,31]][Kx([t.get(0,8),t.get(1,8),t.get(2,8),t.get(3,8),t.get(4,8),t.get(5,8),t.get(7,8),t.get(8,8),t.get(8,7),t.get(8,5),t.get(8,4),t.get(8,3),t.get(8,2),t.get(8,1),t.get(8,0)])];if(i){var u=Math.floor(i[1]/8),f=i[1]%8;switch(u){case 0:return a.M;case 1:return a.L;case 2:return a.H;case 3:return a.Q}}return null}function Qx(t,e,r,n){for(var o=1;4*o+17<=e.width;)o++;if(o<=0)return null;for(var i=[21522,20773,24188,23371,17913,16590,20375,19104,30660,29427,32170,30877,26159,25368,27713,26998,5769,5054,7399,6608,1890,597,3340,2107,13663,12392,16177,14854,9396,8579,11994,11245],u=Kx([e.get(0,8),e.get(1,8),e.get(2,8),e.get(3,8),e.get(4,8),e.get(5,8),e.get(7,8),e.get(8,8),e.get(8,7),e.get(8,5),e.get(8,4),e.get(8,3),e.get(8,2),e.get(8,1),e.get(8,0)]),f=Kx([e.get(8,e.height-1),e.get(8,e.height-2),e.get(8,e.height-3),e.get(8,e.height-4),e.get(8,e.height-5),e.get(8,e.height-6),e.get(8,e.height-7),e.get(e.width-8,8),e.get(e.width-7,8),e.get(e.width-6,8),e.get(e.width-5,8),e.get(e.width-4,8),e.get(e.width-3,8),e.get(e.width-2,8),e.get(e.width-1,8)]),s=null,c=1/0,l=0;l<i.length;l++){var h=function(t,e){for(var r=0,n=t^e;0!==n;)r++,n&=n-1;return r}(u,i[l]);h<c&&(c=h,s=l);var d=function(t,e){for(var r=0,n=t^e;0!==n;)r++,n&=n-1;return r}(f,i[l]);d<c&&(c=d,s=l)}if(null===s||c>3)return null;var v=s>>3,p=a.M;switch(v){case 0:p=a.M;break;case 1:p=a.L;break;case 2:p=a.H;break;case 3:p=a.Q}return{version:o,ecLevel:p,formatBits:s}}function Xx(t){for(var e,r,n,o=rx.createEmpty(t.width,t.inverted),i=0;i<t.height;i++)for(var a=0;a<t.width;a++){var u=t.get(a,i),f=a>0&&i>0?o.get(a-1,i-1):0,s=i>0?o.get(a,i-1):0,c=a>0?o.get(a-1,i):0;o.set(a,i,u^(e=f,r=s,n=c,Math.abs(e-r)<=Math.abs(r-n)?n:r))}return o}function Yx(t,e,r,n,o){var i=r.width,a=function(t,e,r,n){for(var o=Math.round(n/7),i=[{x:o,y:o},{x:t-o-1,y:o},{x:o,y:e-o-1}],a=null,u=0;u<i.length;u++){var f=i[u].x,s=i[u].y,c=Zx(r,f,s,n/7);if(c){var l=null;l=0===u?wx.TopLeft:1===u?wx.TopRight:wx.BottomLeft,a||(a={}),a[l]=c}}return a}(t.width,t.height,t,n),u=!a||!a[wx.TopLeft]||!a[wx.TopRight]||!a[wx.BottomLeft];if(u&&o)return null;var f=a&&a[wx.TopLeft]||{x:0,y:0,size:n},s=a&&a[wx.TopRight]||{x:i-1,y:0,size:n},c=a&&a[wx.BottomLeft]||{x:0,y:i-1,size:n},l=n,h=l,d={topLeftFinder:f,topRightFinder:s,bottomLeftFinder:c,topLeft:{x:f.x-3.5*l,y:f.y-3.5*h},topRight:{x:s.x+3.5*l,y:s.y-3.5*h},bottomLeft:{x:c.x-3.5*l,y:c.y+3.5*h},bottomRight:{x:s.x+3.5*l+(c.x-f.x),y:s.y+3.5*h+(c.y-f.y)},dimension:i},v=d.dimension,p=Ux(d,t,Math.round((v-17)/4)).matrix;if(!p)return null;var g=Qx(0,p,0,0);if(!g)return null;var w=g.version,y=g.ecLevel,m=xx(d,w),C=Ix(p,w,y);return C.matrix?{binaryData:C.codewords&&C.codewords.corrected||[],data:C.decoded?C.decoded.text:"",chunks:C.decoded?C.decoded.chunks:[],version:w,location:{topRightCorner:d.topRight,topLeftCorner:d.topLeft,bottomRightCorner:d.bottomRight,bottomLeftCorner:d.bottomLeft,topRightFinderPattern:s,topLeftFinderPattern:f,bottomLeftFinderPattern:c,bottomRightAlignmentPattern:m.length>0?m[m.length-1]:void 0},matrix:C.matrix}:null}function Zx(t,e,r,n){for(var o,i,a,u,f,s=Math.floor(n),c=function(n,o){var i=t.get(e+n,r+o);return{x:e+n,y:r+o,value:i}},l=c(0,0),h=l.value,d=1,v=!0;v;){v=!1;for(var p=-d;p<=d;p++)for(var g=-d;g<=d;g++){var w=c(p,g);if(w.x>=0&&w.x<t.width&&w.y>=0&&w.y<t.height){var y=w.value;if(y===h){if(Math.abs(p)===d||Math.abs(g)===d){var m=Math.abs(p),C=Math.abs(g);if(m<=s&&C<=s)return o=e,i=r,a=n,u=w.x-e,f=w.y-r,{x:o+u/2,y:i+f/2,size:2*Math.max(Math.abs(u),Math.abs(f))/7*7};v=!0,d++}}}}}}return null}function zx(t,e,r){var n={width:t.width,height:t.height,get:function(e,r){return t.get(e,r)}},o=Yx(n,0,n,e,r);return o||Yx(Xx(n),0,n,e,r)}function Jx(t,e,r){void 0===r&&(r={});var n=40,o=r.inversionAttempts;void 0===o&&(o="attemptBoth");var i=function(t,e){for(var r=t.data,n=t.width,o=t.height,i=new rx(n,o,e),a=0;a<o;a++)for(var u=0;u<n;u++){var f=4*(a*n+u),s=(r[f]+r[f+1]+r[f+2])/3;i.set(u,a,s<128)}return i}(t,!1),u=function(t){for(var e=Math.floor(t.width/2),r=Math.floor(t.height/2),n=0,o=0,i=0;i<t.height;i++)for(var a=0;a<t.width;a++)t.get(a,i)&&(a<e&&i<r?n++:a>=e&&i>=r&&o++);var u=n>o;return function(n,o){var i=t.get(n,o);return n<e&&o<r?u?!i:i:n>=e&&o>=r?u?i:!i:i}}(i),f=function(t,e){for(var r=[],n=[],o=0;o<t.height;o++)for(var i=0;i<t.width;i++){var a=e(i,o);a&&(r.push(i),n.push(o))}r.sort((function(t,e){return t-e})),n.sort((function(t,e){return t-e}));var u=r[Math.floor(r.length/2)],f=n[Math.floor(n.length/2)],s=r[Math.floor(r.length/10)],c=r[Math.floor(9*r.length/10)],l=n[Math.floor(n.length/10)],h=n[Math.floor(9*n.length/10)];return{centerX:u,centerY:f,minX:s,maxX:c,minY:l,maxY:h,averageSize:Math.max(c-s,h-l)/n}}(i,u);if(!f)return null;var s=f.averageSize;return zx(i,s,!0)||zx(i,s,!1)}return function(t,e,r,n){return void 0===n&&(n={}),Jx({data:t,width:e,height:r},0,n)}}();
    </script>
    <script>
const PRODUTOS_DB = [{"fornecedor_grupo": "EURO", "produto": "4335100", "descricao": "FELPUDO TROPICAL TINTO 1.45L 100% POLYESTER", "cod_prod_erp": "2770", "nome_prod_erp": "ATOALHADO - 100% POLIESTER"}, {"fornecedor_grupo": "EURO", "produto": "4335103", "descricao": "FELPUDO TROPICAL TINTO 1.45L 100% POLYESTER", "cod_prod_erp": "2770", "nome_prod_erp": "ATOALHADO - 100% POLIESTER"}, {"fornecedor_grupo": "LITORAL", "produto": "1700000", "descricao": "CETIM CHARMOUSSE", "cod_prod_erp": "3670", "nome_prod_erp": "CETIM 100% POLIESTER - LISO"}, {"fornecedor_grupo": "LITORAL", "produto": "1710000", "descricao": "CETIM CHARMOUSSE", "cod_prod_erp": "3670", "nome_prod_erp": "CETIM 100% POLIESTER - LISO"}, {"fornecedor_grupo": "EURO", "produto": "172100", "descricao": "CETIM TWIST 1,47L 100% POLYESTER", "cod_prod_erp": "3670", "nome_prod_erp": "CETIM 100% POLIESTER - LISO"}, {"fornecedor_grupo": "LITORAL", "produto": "1800000", "descricao": "CETIM CHARMOUSSE SPAN", "cod_prod_erp": "3710", "nome_prod_erp": "CETIM  C/ ELASTANO - LISO"}, {"fornecedor_grupo": "LITORAL", "produto": "1810000", "descricao": "CETIM CHARMOUSSE SPAN", "cod_prod_erp": "3710", "nome_prod_erp": "CETIM  C/ ELASTANO - LISO"}, {"fornecedor_grupo": "EURO", "produto": "172103", "descricao": "CETIM TWIST 1,47L 100% POLYESTER", "cod_prod_erp": "3710", "nome_prod_erp": "CETIM  C/ ELASTANO - LISO"}, {"fornecedor_grupo": "EURO", "produto": "5212100", "descricao": "CETIM C/ELASTANO 1,50L 97% POLYE 3%ELAST", "cod_prod_erp": "3710", "nome_prod_erp": "CETIM  C/ ELASTANO - LISO"}, {"fornecedor_grupo": "EURO", "produto": "5212103", "descricao": "CETIM C/ELASTANO 1,50L 97% POLYE 3%ELAST", "cod_prod_erp": "3710", "nome_prod_erp": "CETIM  C/ ELASTANO - LISO"}, {"fornecedor_grupo": "EURO", "produto": "169100", "descricao": "CETIM C/ELASTANO 1.47L 97% POLIESTER 3%ELASTANO 88GR/M2", "cod_prod_erp": "3710", "nome_prod_erp": "CETIM  C/ ELASTANO - LISO"}, {"fornecedor_grupo": "EURO", "produto": "169103", "descricao": "CETIM C/ELASTANO 1.47L 97% POLYE 3%ELAST", "cod_prod_erp": "3710", "nome_prod_erp": "CETIM  C/ ELASTANO - LISO"}, {"fornecedor_grupo": "EURO", "produto": "4885100", "descricao": "CETIM TINTO 3,0L 100% POLYESTER", "cod_prod_erp": "3911", "nome_prod_erp": "CETIM LISO"}, {"fornecedor_grupo": "EURO", "produto": "4885103", "descricao": "CETIM TINTO 3,0L 100% POLYESTER", "cod_prod_erp": "3911", "nome_prod_erp": "CETIM LISO"}, {"fornecedor_grupo": "LITORAL", "produto": "1990000", "descricao": "CHIFFON 100D", "cod_prod_erp": "3951", "nome_prod_erp": "CHIFFON"}, {"fornecedor_grupo": "LITORAL", "produto": "1950000", "descricao": "CHIFFON 100D", "cod_prod_erp": "3951", "nome_prod_erp": "CHIFFON"}, {"fornecedor_grupo": "LITORAL", "produto": "54680000", "descricao": "CHIFFON 100D", "cod_prod_erp": "3951", "nome_prod_erp": "CHIFFON"}, {"fornecedor_grupo": "LITORAL", "produto": "54690000", "descricao": "CHIFFON 100D", "cod_prod_erp": "3951", "nome_prod_erp": "CHIFFON"}, {"fornecedor_grupo": "EURO", "produto": "201100", "descricao": "CHIFFON TINTO 1.47L 100% POLIESTER 74GR/M2", "cod_prod_erp": "3951", "nome_prod_erp": "CHIFFON"}, {"fornecedor_grupo": "EURO", "produto": "201103", "descricao": "CHIFFON TINTO 1.47L 100% POLIESTER 74GR/M2", "cod_prod_erp": "3951", "nome_prod_erp": "CHIFFON"}, {"fornecedor_grupo": "LITORAL", "produto": "54790000", "descricao": "CHITAO ESTAMPADO", "cod_prod_erp": "4072", "nome_prod_erp": "CHITAO / TEXTOLEEN ESTAMPADO 100% POLIESTER"}, {"fornecedor_grupo": "EURO", "produto": "3667103", "descricao": "CHITAO FLEX 1,50L 100% POLYESTER", "cod_prod_erp": "4072", "nome_prod_erp": "CHITAO / TEXTOLEEN ESTAMPADO 100% POLIESTER"}, {"fornecedor_grupo": "EURO", "produto": "5612103", "descricao": "EUROLEEN ARTEDECOR 1,50L 100% POLYESTER", "cod_prod_erp": "4072", "nome_prod_erp": "CHITAO / TEXTOLEEN ESTAMPADO 100% POLIESTER"}, {"fornecedor_grupo": "EURO", "produto": "5607103", "descricao": "EUROLEEN CLASSIC 1,50L 100% POLYESTER", "cod_prod_erp": "4072", "nome_prod_erp": "CHITAO / TEXTOLEEN ESTAMPADO 100% POLIESTER"}, {"fornecedor_grupo": "EURO", "produto": "5142100", "descricao": "CREPE AMANDA 1,50L 100% POLYESTER", "cod_prod_erp": "4402", "nome_prod_erp": "CREPE AMANDA"}, {"fornecedor_grupo": "EURO", "produto": "5142103", "descricao": "CREPE AMANDA 1,50L 100% POLYESTER", "cod_prod_erp": "4402", "nome_prod_erp": "CREPE AMANDA"}, {"fornecedor_grupo": "EURO", "produto": "3235100", "descricao": "CREPE AMANDA 1.47L 100%POLIESTER 156GR/M2", "cod_prod_erp": "4402", "nome_prod_erp": "CREPE AMANDA"}, {"fornecedor_grupo": "EURO", "produto": "3235103", "descricao": "CREPE AMANDA 1.47L 100%POLIESTER 156GR/M2", "cod_prod_erp": "4402", "nome_prod_erp": "CREPE AMANDA"}, {"fornecedor_grupo": "LITORAL", "produto": "51600000", "descricao": "AIR FLOW SLUB LAGUNA", "cod_prod_erp": "4682", "nome_prod_erp": "CREPE DUNA  - AIR FLOW"}, {"fornecedor_grupo": "LITORAL", "produto": "14200000", "descricao": "TECIDO DUNAS (CEY)", "cod_prod_erp": "4682", "nome_prod_erp": "CREPE DUNA  - AIR FLOW"}, {"fornecedor_grupo": "LITORAL", "produto": "14210000", "descricao": "TECIDO DUNAS (CEY)", "cod_prod_erp": "4682", "nome_prod_erp": "CREPE DUNA  - AIR FLOW"}, {"fornecedor_grupo": "LITORAL", "produto": "55250000", "descricao": "TECIDO DUNAS HEAVY", "cod_prod_erp": "4682", "nome_prod_erp": "CREPE DUNA  - AIR FLOW"}, {"fornecedor_grupo": "EURO", "produto": "5012103", "descricao": "CEY AIR FLOW FIO TINTO 1,47L  100% POLYESTER", "cod_prod_erp": "4682", "nome_prod_erp": "CREPE DUNA  - AIR FLOW"}, {"fornecedor_grupo": "EURO", "produto": "5051103", "descricao": "CEY AIR FLOW PREMIUM TINTO 1,50L 100% POLYESTER", "cod_prod_erp": "4682", "nome_prod_erp": "CREPE DUNA  - AIR FLOW"}, {"fornecedor_grupo": "EURO", "produto": "4861100", "descricao": "CEY AIR FLOW TINTO 1,50L 100% POLYESTER", "cod_prod_erp": "4682", "nome_prod_erp": "CREPE DUNA  - AIR FLOW"}, {"fornecedor_grupo": "EURO", "produto": "4861103", "descricao": "CEY AIR FLOW TINTO 1,50L 100% POLYESTER", "cod_prod_erp": "4682", "nome_prod_erp": "CREPE DUNA  - AIR FLOW"}, {"fornecedor_grupo": "EURO", "produto": "5502103", "descricao": "CEY TINTO 1,50L 100% POLYESTER", "cod_prod_erp": "4682", "nome_prod_erp": "CREPE DUNA  - AIR FLOW"}, {"fornecedor_grupo": "LITORAL", "produto": "54660000", "descricao": "CREPE GEORGETE", "cod_prod_erp": "4724", "nome_prod_erp": "CREPE GEORGETE LISO 100% POLIESTER"}, {"fornecedor_grupo": "LITORAL", "produto": "56900000", "descricao": "CREPE GEORGETE", "cod_prod_erp": "4724", "nome_prod_erp": "CREPE GEORGETE LISO 100% POLIESTER"}, {"fornecedor_grupo": "LITORAL", "produto": "56910000", "descricao": "CREPE GEORGETE BRANCO", "cod_prod_erp": "4724", "nome_prod_erp": "CREPE GEORGETE LISO 100% POLIESTER"}, {"fornecedor_grupo": "EURO", "produto": "3281103", "descricao": "CREPE GGT 2400 TORCOES 1,50L 100% POLYESTER", "cod_prod_erp": "4724", "nome_prod_erp": "CREPE GEORGETE LISO 100% POLIESTER"}, {"fornecedor_grupo": "EURO", "produto": "3281100", "descricao": "CREPE GGT 2400 TORCOES 1.47L 100%POLIESTER 114GR/M2", "cod_prod_erp": "4724", "nome_prod_erp": "CREPE GEORGETE LISO 100% POLIESTER"}, {"fornecedor_grupo": "LITORAL", "produto": "19360000", "descricao": "CREPE MUSSON ITALY", "cod_prod_erp": "4926", "nome_prod_erp": "CREPE MUSSON"}, {"fornecedor_grupo": "LITORAL", "produto": "19370000", "descricao": "CREPE MUSSON ITALY", "cod_prod_erp": "4926", "nome_prod_erp": "CREPE MUSSON"}, {"fornecedor_grupo": "LITORAL", "produto": "3170000", "descricao": "CREPE MUSSON ITALY", "cod_prod_erp": "4926", "nome_prod_erp": "CREPE MUSSON"}, {"fornecedor_grupo": "EURO", "produto": "4415103", "descricao": "CREPE MUSSON VENEZA 1.47 92% POLY 8% ELAST", "cod_prod_erp": "4926", "nome_prod_erp": "CREPE MUSSON"}, {"fornecedor_grupo": "EURO", "produto": "4564103", "descricao": "CREPE MUSSON VENEZA ESTAMPADO 1,47L 95% POLYESTER 5% ELASTAN", "cod_prod_erp": "4926", "nome_prod_erp": "CREPE MUSSON"}, {"fornecedor_grupo": "EURO", "produto": "5221100", "descricao": "SALINA TINTO 1,50L 96% POLYESTER 4% ELASTANO", "cod_prod_erp": "5167", "nome_prod_erp": "CREPE SALINA LISO 96% POLIESTER 4% ELAST"}, {"fornecedor_grupo": "EURO", "produto": "5221103", "descricao": "SALINA TINTO 1,50L 96% POLYESTER 4% ELASTANO", "cod_prod_erp": "5167", "nome_prod_erp": "CREPE SALINA LISO 96% POLIESTER 4% ELAST"}, {"fornecedor_grupo": "EURO", "produto": "2637103", "descricao": "SALINA TINTO 1.47L  96% POLYESTER 4% ELASTANO 72GR/M", "cod_prod_erp": "5167", "nome_prod_erp": "CREPE SALINA LISO 96% POLIESTER 4% ELAST"}, {"fornecedor_grupo": "EURO", "produto": "2637100", "descricao": "SALINA TINTO 1.47L  96% POLYESTER 4% ELASTANO 72GR/M", "cod_prod_erp": "5167", "nome_prod_erp": "CREPE SALINA LISO 96% POLIESTER 4% ELAST"}, {"fornecedor_grupo": "EURO", "produto": "4476100", "descricao": "TULLE ARMACAO 2.80L 100% POLYESTER", "cod_prod_erp": "5491", "nome_prod_erp": "FIL√ì DE ARMA√á√ÉO"}, {"fornecedor_grupo": "EURO", "produto": "4476103", "descricao": "TULLE ARMACAO 2.80L 100% POLYESTER", "cod_prod_erp": "5491", "nome_prod_erp": "FIL√ì DE ARMA√á√ÉO"}, {"fornecedor_grupo": "LITORAL", "produto": "57150000", "descricao": "GABARDINE DOURO", "cod_prod_erp": "5747", "nome_prod_erp": "GABARDINE   - 100% POLIESTER"}, {"fornecedor_grupo": "LITORAL", "produto": "57140000", "descricao": "GABARDINE DOURO", "cod_prod_erp": "5747", "nome_prod_erp": "GABARDINE   - 100% POLIESTER"}, {"fornecedor_grupo": "LITORAL", "produto": "16930000", "descricao": "GABARDINE ESTORIL", "cod_prod_erp": "5747", "nome_prod_erp": "GABARDINE   - 100% POLIESTER"}, {"fornecedor_grupo": "LITORAL", "produto": "16920000", "descricao": "GABARDINE ESTORIL", "cod_prod_erp": "5747", "nome_prod_erp": "GABARDINE   - 100% POLIESTER"}, {"fornecedor_grupo": "EURO", "produto": "5202100", "descricao": "GABARDINE MADRID 1,47L 100% POLYESTER", "cod_prod_erp": "5747", "nome_prod_erp": "GABARDINE   - 100% POLIESTER"}, {"fornecedor_grupo": "EURO", "produto": "5202103", "descricao": "GABARDINE MADRID 1,47L 100% POLYESTER", "cod_prod_erp": "5747", "nome_prod_erp": "GABARDINE   - 100% POLIESTER"}, {"fornecedor_grupo": "EURO", "produto": "5428103", "descricao": "GABARDINE PREMIUM 1,47L 100% POLYESTER", "cod_prod_erp": "5747", "nome_prod_erp": "GABARDINE   - 100% POLIESTER"}, {"fornecedor_grupo": "LITORAL", "produto": "3510000", "descricao": "GABARDINE SINTRA", "cod_prod_erp": "5747", "nome_prod_erp": "GABARDINE   - 100% POLIESTER"}, {"fornecedor_grupo": "LITORAL", "produto": "3520000", "descricao": "GABARDINE SINTRA BRANCO", "cod_prod_erp": "5747", "nome_prod_erp": "GABARDINE   - 100% POLIESTER"}, {"fornecedor_grupo": "EURO", "produto": "4725100", "descricao": "GABARDINE TINTO 1.50L 100%POLYESTER", "cod_prod_erp": "5747", "nome_prod_erp": "GABARDINE   - 100% POLIESTER"}, {"fornecedor_grupo": "EURO", "produto": "4725103", "descricao": "GABARDINE TINTO 1.50L 100%POLYESTER", "cod_prod_erp": "5747", "nome_prod_erp": "GABARDINE   - 100% POLIESTER"}, {"fornecedor_grupo": "LITORAL", "produto": "58120000", "descricao": "JACQUARD DAKOTA", "cod_prod_erp": "5787", "nome_prod_erp": "JACQUARD"}, {"fornecedor_grupo": "LITORAL", "produto": "60080000", "descricao": "JACQUARD DAKOTA", "cod_prod_erp": "5787", "nome_prod_erp": "JACQUARD"}, {"fornecedor_grupo": "LITORAL", "produto": "60220000", "descricao": "JACQUARD DAKOTA", "cod_prod_erp": "5787", "nome_prod_erp": "JACQUARD"}, {"fornecedor_grupo": "EURO", "produto": "4262103", "descricao": "DAMASK 2.80L 100% POLYESTER 152GR/M2", "cod_prod_erp": "5787", "nome_prod_erp": "JACQUARD"}, {"fornecedor_grupo": "EURO", "produto": "5435103", "descricao": "COTTON EMBROIDERY 3D 1,30L 100%ALGODAO BORDADO 100%POLYESTE", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "EURO", "produto": "4759103", "descricao": "COTTON EMBROIDERY CORD 1.30L 100% ALGODAO", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "EURO", "produto": "4385103", "descricao": "COTTON EMBROIDERY LUNA 1,30L 100%ALGODAO/BORDADO:100%POLIEST", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "EURO", "produto": "4385104", "descricao": "COTTON EMBROIDERY LUNA 1,30L 100%ALGODAO/BORDADO:100%POLIEST", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "EURO", "produto": "4385106", "descricao": "COTTON EMBROIDERY LUNA 1,30L 100%ALGODAO/BORDADO:100%POLIEST", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "EURO", "produto": "4385105", "descricao": "COTTON EMBROIDERY LUNA 1,30L 100%ALGODAO/BORDADO:100%POLIEST", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "EURO", "produto": "4761103", "descricao": "COTTON EMBROIDERY LYON 1.30L 100% ALGODAO", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "EURO", "produto": "4662103", "descricao": "COTTON EMBROIDERY MARSELHA 1.30L 100% ALGODAO", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "19040000", "descricao": "LAISE MAUI", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "57710000", "descricao": "LAISE MISSISSIPI", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "57720000", "descricao": "LAISE MISSISSIPI", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "57730000", "descricao": "LAISE MISSISSIPI", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "57740000", "descricao": "LAISE MISSISSIPI", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "57750000", "descricao": "LAISE MISSISSIPI", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "57760000", "descricao": "LAISE MISSISSIPI", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "19060000", "descricao": "LAISE NATURALE", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "54730000", "descricao": "LAISE NATURALE", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "56060000", "descricao": "LAISE NATURALE", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "56070000", "descricao": "LAISE NATURALE", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "56090000", "descricao": "LAISE NATURALE", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "56100000", "descricao": "LAISE NATURALE", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "56110000", "descricao": "LAISE NATURALE", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "60870000", "descricao": "LAISE NATURALE", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "60920000", "descricao": "LAISE NATURALE", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "55090000", "descricao": "LAISE NATURALE", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "55100000", "descricao": "LAISE NATURALE", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "17720000", "descricao": "LAISE PATNA", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "28260000", "descricao": "LAISE PITAIA", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "58240000", "descricao": "LAISE PITAIA", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "58250000", "descricao": "LAISE PITAIA", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "58270000", "descricao": "LAISE PITAIA", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "56610000", "descricao": "LAISE SLUB SALAR", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "56620000", "descricao": "LAISE SLUB SALAR", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "56630000", "descricao": "LAISE SLUB SALAR", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "56650000", "descricao": "LAISE SLUB SALAR", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "56710000", "descricao": "LAISE TC MARES", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "56720000", "descricao": "LAISE TC MARES", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "19000000", "descricao": "LAISE VERANO", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "18920000", "descricao": "LAISE VERANO", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "18890000", "descricao": "LAISE VERANO", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "55610000", "descricao": "LAISE VERANO", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "56010000", "descricao": "LAISE VERANO", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "56020000", "descricao": "LAISE VERANO", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "54710000", "descricao": "LAISE VERANO", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "54720000", "descricao": "LAISE VERANO", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "55630000", "descricao": "LAISE VERANO", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "56040000", "descricao": "LAISE VERANO", "cod_prod_erp": "5919", "nome_prod_erp": "LAISE ALGOD√ÉO - LISA"}, {"fornecedor_grupo": "EURO", "produto": "1965103", "descricao": "LAME 1,50L 100% POLYESTER", "cod_prod_erp": "6120", "nome_prod_erp": "LAME - LISO"}, {"fornecedor_grupo": "EURO", "produto": "3176103", "descricao": "LINHO RUSTICO 1.44L 100% POLYESTER", "cod_prod_erp": "6264", "nome_prod_erp": "LINHAO 100% POLIESTER"}, {"fornecedor_grupo": "LITORAL", "produto": "3980000", "descricao": "LINHO PURO", "cod_prod_erp": "6344", "nome_prod_erp": "LINHO - 100%"}, {"fornecedor_grupo": "EURO", "produto": "4103100", "descricao": "LINHO PURO 1,37L 100% LINHO", "cod_prod_erp": "6344", "nome_prod_erp": "LINHO - 100%"}, {"fornecedor_grupo": "EURO", "produto": "4103103", "descricao": "LINHO PURO 1,37L 100% LINHO", "cod_prod_erp": "6344", "nome_prod_erp": "LINHO - 100%"}, {"fornecedor_grupo": "LITORAL", "produto": "3990000", "descricao": "LINHO PURO BRANCO", "cod_prod_erp": "6344", "nome_prod_erp": "LINHO - 100%"}, {"fornecedor_grupo": "LITORAL", "produto": "17250000", "descricao": "LINHO PURO HEAVY", "cod_prod_erp": "6344", "nome_prod_erp": "LINHO - 100%"}, {"fornecedor_grupo": "LITORAL", "produto": "17260000", "descricao": "LINHO PURO HEAVY", "cod_prod_erp": "6344", "nome_prod_erp": "LINHO - 100%"}, {"fornecedor_grupo": "EURO", "produto": "5065103", "descricao": "LINHO EMBROIDERY SUNSET 1,22L 40% POLY, 40% VISCO, 20%LINHO", "cod_prod_erp": "6504", "nome_prod_erp": "LINHO BORDADO"}, {"fornecedor_grupo": "EURO", "produto": "4736103", "descricao": "LINHO EMBROIDERY TINTO 1.30L  70% VISCOSE 30% LINHO", "cod_prod_erp": "6504", "nome_prod_erp": "LINHO BORDADO"}, {"fornecedor_grupo": "EURO", "produto": "5175103", "descricao": "LINHO EMBROIDERY TURIM 1,40L 45%VISCO, 35% LINHO, 20% POLYES", "cod_prod_erp": "6504", "nome_prod_erp": "LINHO BORDADO"}, {"fornecedor_grupo": "LITORAL", "produto": "20180000", "descricao": "LINHO MISTO ITACARE", "cod_prod_erp": "6827", "nome_prod_erp": "LINHO MISTO -  70% VISCOSE 30% LINHO"}, {"fornecedor_grupo": "LITORAL", "produto": "12130000", "descricao": "LINHO MISTO ITACARE", "cod_prod_erp": "6827", "nome_prod_erp": "LINHO MISTO -  70% VISCOSE 30% LINHO"}, {"fornecedor_grupo": "LITORAL", "produto": "61160000", "descricao": "LINHO MISTO ITACARE BRANCO", "cod_prod_erp": "6827", "nome_prod_erp": "LINHO MISTO -  70% VISCOSE 30% LINHO"}, {"fornecedor_grupo": "LITORAL", "produto": "20440000", "descricao": "LINHO MISTO LEME SPAN", "cod_prod_erp": "6827", "nome_prod_erp": "LINHO MISTO -  70% VISCOSE 30% LINHO"}, {"fornecedor_grupo": "LITORAL", "produto": "15420000", "descricao": "LINHO MISTO MARAU", "cod_prod_erp": "6827", "nome_prod_erp": "LINHO MISTO -  70% VISCOSE 30% LINHO"}, {"fornecedor_grupo": "EURO", "produto": "5479103", "descricao": "LINHO SUMMER 1,48L 50% VISCOSE 30%ALGODAO 20%LINHO", "cod_prod_erp": "6827", "nome_prod_erp": "LINHO MISTO -  70% VISCOSE 30% LINHO"}, {"fornecedor_grupo": "EURO", "produto": "2443100", "descricao": "LINHO TINTO 1,38L 55%VISCOSE 45%LINHO", "cod_prod_erp": "6827", "nome_prod_erp": "LINHO MISTO -  70% VISCOSE 30% LINHO"}, {"fornecedor_grupo": "EURO", "produto": "2443103", "descricao": "LINHO TINTO 1.38L 55%VISCOSE 45%LINHO", "cod_prod_erp": "6827", "nome_prod_erp": "LINHO MISTO -  70% VISCOSE 30% LINHO"}, {"fornecedor_grupo": "EURO", "produto": "5179103", "descricao": "LINHO TINTO CARAIVA 1,38L 55%VISCOSE 45%LINHO", "cod_prod_erp": "6827", "nome_prod_erp": "LINHO MISTO -  70% VISCOSE 30% LINHO"}, {"fornecedor_grupo": "EURO", "produto": "5423103", "descricao": "LINHO TULUM 1,38L 70% VISCOSE 30% LINHO", "cod_prod_erp": "6827", "nome_prod_erp": "LINHO MISTO -  70% VISCOSE 30% LINHO"}, {"fornecedor_grupo": "EURO", "produto": "5424103", "descricao": "HELANKA FASHION 1,80L 100% POLYESTER", "cod_prod_erp": "7353", "nome_prod_erp": "MALHA HELANCA KG"}, {"fornecedor_grupo": "EURO", "produto": "2248103", "descricao": "HELANKA HIPER SOFT 1,80L 100% POLYESTER", "cod_prod_erp": "7353", "nome_prod_erp": "MALHA HELANCA KG"}, {"fornecedor_grupo": "EURO", "produto": "2248100", "descricao": "HELANKA HIPER SOFT 1.80 100% POLYESTER", "cod_prod_erp": "7353", "nome_prod_erp": "MALHA HELANCA KG"}, {"fornecedor_grupo": "EURO", "produto": "2817103", "descricao": "HELANKA HIPER SOFT ESTAMP 1.80 100%POLIESTER", "cod_prod_erp": "7353", "nome_prod_erp": "MALHA HELANCA KG"}, {"fornecedor_grupo": "EURO", "produto": "4923103", "descricao": "HELANKA LISA 1,80L 100% POLYESTER", "cod_prod_erp": "7353", "nome_prod_erp": "MALHA HELANCA KG"}, {"fornecedor_grupo": "EURO", "produto": "4923100", "descricao": "HELANKA LISA 1,80L 100% POLYESTER", "cod_prod_erp": "7353", "nome_prod_erp": "MALHA HELANCA KG"}, {"fornecedor_grupo": "LITORAL", "produto": "4170000", "descricao": "MALHA HELANCA LIGHT", "cod_prod_erp": "7353", "nome_prod_erp": "MALHA HELANCA KG"}, {"fornecedor_grupo": "LITORAL", "produto": "4180000", "descricao": "MALHA HELANCA LIGHT", "cod_prod_erp": "7353", "nome_prod_erp": "MALHA HELANCA KG"}, {"fornecedor_grupo": "LITORAL", "produto": "17490000", "descricao": "MALHA HELANQUINHA", "cod_prod_erp": "7353", "nome_prod_erp": "MALHA HELANCA KG"}, {"fornecedor_grupo": "LITORAL", "produto": "17480000", "descricao": "MALHA HELANQUINHA", "cod_prod_erp": "7353", "nome_prod_erp": "MALHA HELANCA KG"}, {"fornecedor_grupo": "LITORAL", "produto": "15490000", "descricao": "MATELASSE FLORA ESTAMPADO", "cod_prod_erp": "8369", "nome_prod_erp": "MATELASSE - 100% POLIESTER"}, {"fornecedor_grupo": "LITORAL", "produto": "54460000", "descricao": "MATELASSE FLORA ESTAMPADO", "cod_prod_erp": "8369", "nome_prod_erp": "MATELASSE - 100% POLIESTER"}, {"fornecedor_grupo": "EURO", "produto": "5249103", "descricao": "MATELADO CARNEIRINHO 2.40L 100% POLYESTER", "cod_prod_erp": "8369", "nome_prod_erp": "MATELASSE - 100% POLIESTER"}, {"fornecedor_grupo": "EURO", "produto": "4348103", "descricao": "MATELADO ESTAMPADO DOBRADO 2.40L 100%POLYESTER", "cod_prod_erp": "8369", "nome_prod_erp": "MATELASSE - 100% POLIESTER"}, {"fornecedor_grupo": "EURO", "produto": "5476103", "descricao": "MATELADO LEAF ESTAMPADO 2,40L 100% POLYESTER", "cod_prod_erp": "8369", "nome_prod_erp": "MATELASSE - 100% POLIESTER"}, {"fornecedor_grupo": "EURO", "produto": "5482103", "descricao": "MATELADO LEAF TINTO 2,40L 100% POLYESTER", "cod_prod_erp": "8369", "nome_prod_erp": "MATELASSE - 100% POLIESTER"}, {"fornecedor_grupo": "EURO", "produto": "4397103", "descricao": "MATELADO TINTO DOBRADO 2.40L 100% POLYESTER", "cod_prod_erp": "8369", "nome_prod_erp": "MATELASSE - 100% POLIESTER"}, {"fornecedor_grupo": "EURO", "produto": "4158103", "descricao": "MATELADO TINTO PREMIUM RAMADO 2,40L 100% POLYESTER", "cod_prod_erp": "8369", "nome_prod_erp": "MATELASSE - 100% POLIESTER"}, {"fornecedor_grupo": "LITORAL", "produto": "17580000", "descricao": "MATELASSE LIDIA LISO", "cod_prod_erp": "8369", "nome_prod_erp": "MATELASSE - 100% POLIESTER"}, {"fornecedor_grupo": "LITORAL", "produto": "54740000", "descricao": "MATELASSE LISO CORA", "cod_prod_erp": "8369", "nome_prod_erp": "MATELASSE - 100% POLIESTER"}, {"fornecedor_grupo": "LITORAL", "produto": "59710000", "descricao": "CHIFFON CELINE", "cod_prod_erp": "8745", "nome_prod_erp": "MUSSELINE TOQUE DE SEDA"}, {"fornecedor_grupo": "LITORAL", "produto": "59720000", "descricao": "CHIFFON CELINE BRANCO", "cod_prod_erp": "8745", "nome_prod_erp": "MUSSELINE TOQUE DE SEDA"}, {"fornecedor_grupo": "EURO", "produto": "4927103", "descricao": "MUSSELINE CREPE 1,50L 100% POLYESTER", "cod_prod_erp": "8745", "nome_prod_erp": "MUSSELINE TOQUE DE SEDA"}, {"fornecedor_grupo": "EURO", "produto": "5297100", "descricao": "MUSSELINE CREPE CRYSTAL STONE 1,50L 100% POLYESTER", "cod_prod_erp": "8745", "nome_prod_erp": "MUSSELINE TOQUE DE SEDA"}, {"fornecedor_grupo": "EURO", "produto": "5297103", "descricao": "MUSSELINE CREPE CRYSTAL STONE 1,50L 100% POLYESTER", "cod_prod_erp": "8745", "nome_prod_erp": "MUSSELINE TOQUE DE SEDA"}, {"fornecedor_grupo": "LITORAL", "produto": "15950000", "descricao": "ORGANZA CRISTAL", "cod_prod_erp": "8785", "nome_prod_erp": "ORGANZA"}, {"fornecedor_grupo": "EURO", "produto": "323103", "descricao": "ORGANZA CRISTAL 1.52L 100% POLIESTER - 27GR/M2", "cod_prod_erp": "8785", "nome_prod_erp": "ORGANZA"}, {"fornecedor_grupo": "EURO", "produto": "323100", "descricao": "ORGANZA CRISTAL 1.52L 100% POLIESTER - 27GR/M2", "cod_prod_erp": "8785", "nome_prod_erp": "ORGANZA"}, {"fornecedor_grupo": "LITORAL", "produto": "15960000", "descricao": "ORGANZA CRISTAL BRANCO", "cod_prod_erp": "8785", "nome_prod_erp": "ORGANZA"}, {"fornecedor_grupo": "EURO", "produto": "5167100", "descricao": "ORGANZA TINTO 1.47L 100% POLYESTER", "cod_prod_erp": "8785", "nome_prod_erp": "ORGANZA"}, {"fornecedor_grupo": "EURO", "produto": "5167103", "descricao": "ORGANZA TINTO 1.47L 100% POLYESTER", "cod_prod_erp": "8785", "nome_prod_erp": "ORGANZA"}, {"fornecedor_grupo": "LITORAL", "produto": "13270000", "descricao": "OXFORD 3.00", "cod_prod_erp": "8906", "nome_prod_erp": "OXFORD 3 M 100% POLIESTER"}, {"fornecedor_grupo": "LITORAL", "produto": "13280000", "descricao": "OXFORD 3.00 BRANCO", "cod_prod_erp": "8906", "nome_prod_erp": "OXFORD 3 M 100% POLIESTER"}, {"fornecedor_grupo": "EURO", "produto": "1113103", "descricao": "OXFORD TINTO 3,00L 100% POLYESTER", "cod_prod_erp": "8906", "nome_prod_erp": "OXFORD 3 M 100% POLIESTER"}, {"fornecedor_grupo": "EURO", "produto": "1113100", "descricao": "OXFORD TINTO 3.00L 100% POLYESTER", "cod_prod_erp": "8906", "nome_prod_erp": "OXFORD 3 M 100% POLIESTER"}, {"fornecedor_grupo": "LITORAL", "produto": "50080000", "descricao": "OXFORD FLAME", "cod_prod_erp": "8986", "nome_prod_erp": "OXFORD FLAME"}, {"fornecedor_grupo": "LITORAL", "produto": "50090000", "descricao": "OXFORD FLAME", "cod_prod_erp": "8986", "nome_prod_erp": "OXFORD FLAME"}, {"fornecedor_grupo": "EURO", "produto": "3058100", "descricao": "OXFORD SLUB 3.00L 100%POLYESTER", "cod_prod_erp": "8986", "nome_prod_erp": "OXFORD FLAME"}, {"fornecedor_grupo": "EURO", "produto": "3058103", "descricao": "OXFORD SLUB 3.00L 100%POLYESTER", "cod_prod_erp": "8986", "nome_prod_erp": "OXFORD FLAME"}, {"fornecedor_grupo": "LITORAL", "produto": "20020000", "descricao": "OXFORD 1.47", "cod_prod_erp": "9026", "nome_prod_erp": "OXFORD LISO"}, {"fornecedor_grupo": "LITORAL", "produto": "20030000", "descricao": "OXFORD 1.47 BRANCO", "cod_prod_erp": "9026", "nome_prod_erp": "OXFORD LISO"}, {"fornecedor_grupo": "LITORAL", "produto": "59030000", "descricao": "OXFORD HEAVY", "cod_prod_erp": "9026", "nome_prod_erp": "OXFORD LISO"}, {"fornecedor_grupo": "LITORAL", "produto": "59040000", "descricao": "OXFORD HEAVY BRANCO", "cod_prod_erp": "9026", "nome_prod_erp": "OXFORD LISO"}, {"fornecedor_grupo": "EURO", "produto": "334103", "descricao": "OXFORD TINTO 1,50L 100% POLYESTER", "cod_prod_erp": "9026", "nome_prod_erp": "OXFORD LISO"}, {"fornecedor_grupo": "EURO", "produto": "334100", "descricao": "OXFORD TINTO 1,50L 100% POLYESTER", "cod_prod_erp": "9026", "nome_prod_erp": "OXFORD LISO"}, {"fornecedor_grupo": "LITORAL", "produto": "5570000", "descricao": "OXFORDINE", "cod_prod_erp": "9109", "nome_prod_erp": "OXFORDINE"}, {"fornecedor_grupo": "LITORAL", "produto": "11940000", "descricao": "OXFORDINE", "cod_prod_erp": "9109", "nome_prod_erp": "OXFORDINE"}, {"fornecedor_grupo": "EURO", "produto": "4700103", "descricao": "OXFORDINE TINTO 1.50L 100%POLYESTER 109GR/M2", "cod_prod_erp": "9109", "nome_prod_erp": "OXFORDINE"}, {"fornecedor_grupo": "EURO", "produto": "4700100", "descricao": "OXFORDINE TINTO 1.50L 100%POLYESTER 109GR/M2", "cod_prod_erp": "9109", "nome_prod_erp": "OXFORDINE"}, {"fornecedor_grupo": "EURO", "produto": "845103", "descricao": "PAETE 6M/M 1.12L 60% LAMINA POLIES.METALIZ.40%POLIES.77GR/M2", "cod_prod_erp": "9229", "nome_prod_erp": "PAETE - FANTASIA"}, {"fornecedor_grupo": "LITORAL", "produto": "8760000", "descricao": "TEMATICO PAETE 6MM", "cod_prod_erp": "9229", "nome_prod_erp": "PAETE - FANTASIA"}, {"fornecedor_grupo": "EURO", "produto": "1468100", "descricao": "EUROSTAR 400 FIOS TINTO 2,80L 100% ALGODAO", "cod_prod_erp": "9532", "nome_prod_erp": "PERCAL  -  400 FIOS"}, {"fornecedor_grupo": "EURO", "produto": "1468103", "descricao": "EUROSTAR 400 FIOS TINTO 2.80L 100% ALGODAO - 143GR/M2", "cod_prod_erp": "9532", "nome_prod_erp": "PERCAL  -  400 FIOS"}, {"fornecedor_grupo": "LITORAL", "produto": "54850000", "descricao": "PERCAL ALGODAO 400 FIOS", "cod_prod_erp": "9532", "nome_prod_erp": "PERCAL  -  400 FIOS"}, {"fornecedor_grupo": "LITORAL", "produto": "54860000", "descricao": "PERCAL ALGODAO 400 FIOS", "cod_prod_erp": "9532", "nome_prod_erp": "PERCAL  -  400 FIOS"}, {"fornecedor_grupo": "EURO", "produto": "706100", "descricao": "EUROSTAR 230 FIOS TINTO 2.50L 100%  ALGODAO", "cod_prod_erp": "9732", "nome_prod_erp": "PERCAL 230 FIOS"}, {"fornecedor_grupo": "EURO", "produto": "706103", "descricao": "EUROSTAR 230 FIOS TINTO 2.50L 100%  ALGODAO", "cod_prod_erp": "9732", "nome_prod_erp": "PERCAL 230 FIOS"}, {"fornecedor_grupo": "LITORAL", "produto": "7470000", "descricao": "PERCAL ALGODAO 230 FIOS", "cod_prod_erp": "9732", "nome_prod_erp": "PERCAL 230 FIOS"}, {"fornecedor_grupo": "LITORAL", "produto": "7480000", "descricao": "PERCAL ALGODAO 230 FIOS (BRANCO)", "cod_prod_erp": "9732", "nome_prod_erp": "PERCAL 230 FIOS"}, {"fornecedor_grupo": "EURO", "produto": "307103", "descricao": "MICRO SPORT TINTO 1,60L 100% POLYESTER", "cod_prod_erp": "10577", "nome_prod_erp": "TACTEL"}, {"fornecedor_grupo": "EURO", "produto": "307100", "descricao": "MICRO SPORT TINTO 1.60L 100% POLYESTER", "cod_prod_erp": "10577", "nome_prod_erp": "TACTEL"}, {"fornecedor_grupo": "LITORAL", "produto": "5050000", "descricao": "MICROFIBRA CALIFORNIA", "cod_prod_erp": "10577", "nome_prod_erp": "TACTEL"}, {"fornecedor_grupo": "LITORAL", "produto": "5040000", "descricao": "MICROFIBRA CALIFORNIA", "cod_prod_erp": "10577", "nome_prod_erp": "TACTEL"}, {"fornecedor_grupo": "LITORAL", "produto": "19150000", "descricao": "MICROFIBRA CALIFORNIA", "cod_prod_erp": "10577", "nome_prod_erp": "TACTEL"}, {"fornecedor_grupo": "LITORAL", "produto": "10550000", "descricao": "TULE CRISTAL", "cod_prod_erp": "11772", "nome_prod_erp": "TULE COM GLITTER"}, {"fornecedor_grupo": "LITORAL", "produto": "60750000", "descricao": "TULE CRISTAL TONE TO TONE", "cod_prod_erp": "11772", "nome_prod_erp": "TULE COM GLITTER"}, {"fornecedor_grupo": "LITORAL", "produto": "56260000", "descricao": "TULE STAR GLITTER", "cod_prod_erp": "11772", "nome_prod_erp": "TULE COM GLITTER"}, {"fornecedor_grupo": "EURO", "produto": "4405103", "descricao": "TULLE GLITTER 1.47L 100% POLYESTER 36GR/M2", "cod_prod_erp": "11772", "nome_prod_erp": "TULE COM GLITTER"}, {"fornecedor_grupo": "EURO", "produto": "4405100", "descricao": "TULLE GLITTER 1.47L 100% POLYESTER 36GR/M2", "cod_prod_erp": "11772", "nome_prod_erp": "TULE COM GLITTER"}, {"fornecedor_grupo": "EURO", "produto": "5287103", "descricao": "TULLE GLITZ 1,50L 100% POLYESTER", "cod_prod_erp": "11772", "nome_prod_erp": "TULE COM GLITTER"}, {"fornecedor_grupo": "EURO", "produto": "4599103", "descricao": "TULLE FLEX TINTO 1.60L 96% POLY 4% ELAST", "cod_prod_erp": "11892", "nome_prod_erp": "TULE DE MALHA"}, {"fornecedor_grupo": "EURO", "produto": "4599100", "descricao": "TULLE FLEX TINTO 1.60L 96% POLYESTER 4% ELASTANO 92GR/M2", "cod_prod_erp": "11892", "nome_prod_erp": "TULE DE MALHA"}, {"fornecedor_grupo": "EURO", "produto": "4592103", "descricao": "TULLE INVISIVEL 1,50L 100% POLIAMIDA", "cod_prod_erp": "11932", "nome_prod_erp": "TULE ILUSAO / ILUSION"}, {"fornecedor_grupo": "EURO", "produto": "3961100", "descricao": "TULLE SHINE 3.20L 100% POLIESTER 15GR/M2", "cod_prod_erp": "12053", "nome_prod_erp": "TULE SHINE - LISO"}, {"fornecedor_grupo": "EURO", "produto": "3961103", "descricao": "TULLE SHINE 3.20L 100% POLIESTER 15GR/M2", "cod_prod_erp": "12053", "nome_prod_erp": "TULE SHINE - LISO"}, {"fornecedor_grupo": "LITORAL", "produto": "20270000", "descricao": "TWO WAY", "cod_prod_erp": "12174", "nome_prod_erp": "TWO WAY"}, {"fornecedor_grupo": "LITORAL", "produto": "13860000", "descricao": "TWO WAY BRANCO", "cod_prod_erp": "12174", "nome_prod_erp": "TWO WAY"}, {"fornecedor_grupo": "EURO", "produto": "669100", "descricao": "TWO WAY SPAN 1.47L 96% POLIESTER 4% ELASTANO - 220GR/M2", "cod_prod_erp": "12174", "nome_prod_erp": "TWO WAY"}, {"fornecedor_grupo": "EURO", "produto": "669103", "descricao": "TWO WAY SPAN 1.47L 96% POLY 4% ELAST", "cod_prod_erp": "12174", "nome_prod_erp": "TWO WAY"}, {"fornecedor_grupo": "EURO", "produto": "5102103", "descricao": "TWO WAY RISCA DE GIZ 1,50L 94%POLYES, 5%ELAST, 1%VISCO", "cod_prod_erp": "12214", "nome_prod_erp": "TWO WAY - RISCA DE GIZ"}, {"fornecedor_grupo": "LITORAL", "produto": "15990000", "descricao": "VELUDO CRISTAL", "cod_prod_erp": "12294", "nome_prod_erp": "VELUDO CRISTAL 96% POLIESTER  4% ELASTANO"}, {"fornecedor_grupo": "EURO", "produto": "3597100", "descricao": "VELUDO CRISTAL 1,50L 95%POLIESTER 5%ELASTANO", "cod_prod_erp": "12294", "nome_prod_erp": "VELUDO CRISTAL 96% POLIESTER  4% ELASTANO"}, {"fornecedor_grupo": "EURO", "produto": "3597103", "descricao": "VELUDO CRISTAL 1.50L 95%POLIESTER 5%ELASTANO", "cod_prod_erp": "12294", "nome_prod_erp": "VELUDO CRISTAL 96% POLIESTER  4% ELASTANO"}, {"fornecedor_grupo": "EURO", "produto": "4705100", "descricao": "RAYON SLUB AIRJET 1,47L 100% VISCOSE", "cod_prod_erp": "12376", "nome_prod_erp": "VISCOLINHO LISO"}, {"fornecedor_grupo": "EURO", "produto": "4705103", "descricao": "RAYON SLUB AIRJET 1,47L 100% VISCOSE", "cod_prod_erp": "12376", "nome_prod_erp": "VISCOLINHO LISO"}, {"fornecedor_grupo": "EURO", "produto": "5135103", "descricao": "RAYON SLUB AIRJET 1,50L 100% VISCOSE", "cod_prod_erp": "12376", "nome_prod_erp": "VISCOLINHO LISO"}, {"fornecedor_grupo": "EURO", "produto": "5135100", "descricao": "RAYON SLUB AIRJET 1,50L 100% VISCOSE", "cod_prod_erp": "12376", "nome_prod_erp": "VISCOLINHO LISO"}, {"fornecedor_grupo": "EURO", "produto": "4515100", "descricao": "RAYON SLUB LISO 1.46L 100% VISCOSE 142 GR/M2", "cod_prod_erp": "12376", "nome_prod_erp": "VISCOLINHO LISO"}, {"fornecedor_grupo": "EURO", "produto": "4515103", "descricao": "RAYON SLUB LISO 1.46L 100% VISCOSE 142 GR/M2", "cod_prod_erp": "12376", "nome_prod_erp": "VISCOLINHO LISO"}, {"fornecedor_grupo": "LITORAL", "produto": "15360000", "descricao": "VISCOSE TULUM SLUB", "cod_prod_erp": "12376", "nome_prod_erp": "VISCOLINHO LISO"}, {"fornecedor_grupo": "LITORAL", "produto": "15370000", "descricao": "VISCOSE TULUM SLUB", "cod_prod_erp": "12376", "nome_prod_erp": "VISCOLINHO LISO"}, {"fornecedor_grupo": "EURO", "produto": "5219103", "descricao": "RAYON POPLIN AIRJET 1,50L 100% VISCOSE", "cod_prod_erp": "12456", "nome_prod_erp": "VISCOSE - LISA"}, {"fornecedor_grupo": "EURO", "produto": "5219100", "descricao": "RAYON POPLIN AIRJET 1,50L 100% VISCOSE", "cod_prod_erp": "12456", "nome_prod_erp": "VISCOSE - LISA"}, {"fornecedor_grupo": "EURO", "produto": "4432103", "descricao": "RAYON POPLIN AIRJET 1.47L 100%VISCOSE", "cod_prod_erp": "12456", "nome_prod_erp": "VISCOSE - LISA"}, {"fornecedor_grupo": "EURO", "produto": "4432100", "descricao": "RAYON POPLIN AIRJET 1.47L 100%VISCOSE 115GR/M2", "cod_prod_erp": "12456", "nome_prod_erp": "VISCOSE - LISA"}, {"fornecedor_grupo": "EURO", "produto": "3108103", "descricao": "RAYON VIENA TINTO 1.47L 100%VISCOSE 114GR/M2", "cod_prod_erp": "12456", "nome_prod_erp": "VISCOSE - LISA"}, {"fornecedor_grupo": "EURO", "produto": "3108100", "descricao": "RAYON VIENA TINTO 1.47L 100%VISCOSE 114GR/M2", "cod_prod_erp": "12456", "nome_prod_erp": "VISCOSE - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "18280000", "descricao": "VISCOSE ARLES", "cod_prod_erp": "12456", "nome_prod_erp": "VISCOSE - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "18290000", "descricao": "VISCOSE ARLES", "cod_prod_erp": "12456", "nome_prod_erp": "VISCOSE - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "11110000", "descricao": "VISCOSE POPLIN 1.47", "cod_prod_erp": "12456", "nome_prod_erp": "VISCOSE - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "11100000", "descricao": "VISCOSE POPLIN 1.47", "cod_prod_erp": "12456", "nome_prod_erp": "VISCOSE - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "11150000", "descricao": "VISCOSE TRICOLINE", "cod_prod_erp": "12456", "nome_prod_erp": "VISCOSE - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "11140000", "descricao": "VISCOSE TRICOLINE BRANCO", "cod_prod_erp": "12456", "nome_prod_erp": "VISCOSE - LISA"}, {"fornecedor_grupo": "LITORAL", "produto": "18780000", "descricao": "ALFAIATARIA KALI TWILL", "cod_prod_erp": "12699", "nome_prod_erp": "VISCOSE SENSORIALLE"}, {"fornecedor_grupo": "EURO", "produto": "5112100", "descricao": "MARANT SLUB LIGHT TINTO 1,45L 75% VISCOSE 25% POLIAMIDA", "cod_prod_erp": "12699", "nome_prod_erp": "VISCOSE SENSORIALLE"}, {"fornecedor_grupo": "EURO", "produto": "5112103", "descricao": "MARANT SLUB LIGHT TINTO 1,45L 75% VISCOSE 25% POLIAMIDA", "cod_prod_erp": "12699", "nome_prod_erp": "VISCOSE SENSORIALLE"}, {"fornecedor_grupo": "EURO", "produto": "4446100", "descricao": "RAYON POPLIN SPANDEX TINTO 1,48L 97% VISCOSE 3% ELASTANO", "cod_prod_erp": "12699", "nome_prod_erp": "VISCOSE SENSORIALLE"}, {"fornecedor_grupo": "EURO", "produto": "4446103", "descricao": "RAYON POPLIN SPANDEX TINTO 1,48L 97% VISCOSE 3% ELASTANO", "cod_prod_erp": "12699", "nome_prod_erp": "VISCOSE SENSORIALLE"}, {"fornecedor_grupo": "EURO", "produto": "5169103", "descricao": "RAYON SENSORIALLE AIR FLOW TINTO 1,47L 92%VISCOSE 8%POLY", "cod_prod_erp": "12699", "nome_prod_erp": "VISCOSE SENSORIALLE"}, {"fornecedor_grupo": "EURO", "produto": "5191103", "descricao": "RAYON SENSORIALLE AIRFLOWRISCADEGIZ1,47L92%VIS7%POLIA1%POLYE", "cod_prod_erp": "12699", "nome_prod_erp": "VISCOSE SENSORIALLE"}, {"fornecedor_grupo": "EURO", "produto": "5485103", "descricao": "RAYON SENSORIALLE LINHO 1,50L 75%VICOSE 17%LINHO 8%POLYES", "cod_prod_erp": "12699", "nome_prod_erp": "VISCOSE SENSORIALLE"}, {"fornecedor_grupo": "EURO", "produto": "5394103", "descricao": "RAYON SENSORIALLE SLUB 1,50L 90% VISCOSE 10% POLYESTER", "cod_prod_erp": "12699", "nome_prod_erp": "VISCOSE SENSORIALLE"}, {"fornecedor_grupo": "EURO", "produto": "4851100", "descricao": "RAYON SENSORIALLE TWILL 1,50 92% VISCOSE 8% POLYES", "cod_prod_erp": "12699", "nome_prod_erp": "VISCOSE SENSORIALLE"}, {"fornecedor_grupo": "EURO", "produto": "4851103", "descricao": "RAYON SENSORIALLE TWILL 1,50L 92% VISCOSE 8% POLYESTER", "cod_prod_erp": "12699", "nome_prod_erp": "VISCOSE SENSORIALLE"}, {"fornecedor_grupo": "EURO", "produto": "732100", "descricao": "POLY VOIL 3,00L 100% POLYESTER", "cod_prod_erp": "12779", "nome_prod_erp": "VOIL 100% POLIESTER"}, {"fornecedor_grupo": "EURO", "produto": "732103", "descricao": "POLY VOIL 3,00L 100% POLYESTER", "cod_prod_erp": "12779", "nome_prod_erp": "VOIL 100% POLIESTER"}, {"fornecedor_grupo": "LITORAL", "produto": "11330000", "descricao": "VOAL", "cod_prod_erp": "12779", "nome_prod_erp": "VOIL 100% POLIESTER"}, {"fornecedor_grupo": "LITORAL", "produto": "11320000", "descricao": "VOAL BRANCO", "cod_prod_erp": "12779", "nome_prod_erp": "VOIL 100% POLIESTER"}, {"fornecedor_grupo": "EURO", "produto": "1993100", "descricao": "POLY VOIL CHECK 3.0L 100% POLIESTER - 52GR/M2", "cod_prod_erp": "13144", "nome_prod_erp": "VOIL XADREZ DE POLIESTER"}, {"fornecedor_grupo": "EURO", "produto": "1993103", "descricao": "POLY VOIL CHECK 3.0L 100% POLYESTER", "cod_prod_erp": "13144", "nome_prod_erp": "VOIL XADREZ DE POLIESTER"}, {"fornecedor_grupo": "LITORAL", "produto": "14090000", "descricao": "ZIBELINE", "cod_prod_erp": "13184", "nome_prod_erp": "ZIBELINE 100% POLIESTER"}, {"fornecedor_grupo": "EURO", "produto": "4465103", "descricao": "ZIBELINE 1,50L 100% POLYESTER", "cod_prod_erp": "13184", "nome_prod_erp": "ZIBELINE 100% POLIESTER"}, {"fornecedor_grupo": "EURO", "produto": "4465100", "descricao": "ZIBELINE 1,50L 100% POLYESTER", "cod_prod_erp": "13184", "nome_prod_erp": "ZIBELINE 100% POLIESTER"}, {"fornecedor_grupo": "LITORAL", "produto": "14100000", "descricao": "ZIBELINE BRANCO", "cod_prod_erp": "13184", "nome_prod_erp": "ZIBELINE 100% POLIESTER"}, {"fornecedor_grupo": "EURO", "produto": "5745103", "descricao": "ZIBELINE RAFFINE 1,45L 100% POLYESTER", "cod_prod_erp": "13184", "nome_prod_erp": "ZIBELINE 100% POLIESTER"}, {"fornecedor_grupo": "EURO", "produto": "4548100", "descricao": "CETIM BUCOL 1,47L 100% POLYESTER", "cod_prod_erp": "13290", "nome_prod_erp": "CETIM BUCOL 100% POLIESTER - TINTO"}, {"fornecedor_grupo": "EURO", "produto": "4548103", "descricao": "CETIM BUCOL 1,47L 100% POLYESTER", "cod_prod_erp": "13290", "nome_prod_erp": "CETIM BUCOL 100% POLIESTER - TINTO"}, {"fornecedor_grupo": "LITORAL", "produto": "57780000", "descricao": "CETIM BUCOL BRANCO", "cod_prod_erp": "13290", "nome_prod_erp": "CETIM BUCOL 100% POLIESTER - TINTO"}, {"fornecedor_grupo": "EURO", "produto": "250103", "descricao": "ELEGANT TWILL TINTO 1.47 L 100% POLIESTER - 153GR/M2", "cod_prod_erp": "13991", "nome_prod_erp": "GABARDINE 170G M2"}, {"fornecedor_grupo": "EURO", "produto": "5038103", "descricao": "ALFAIATARIA 5388 1,50L 100% POLYESTER", "cod_prod_erp": "14527", "nome_prod_erp": "ALFAIATARIA NEW LOOK - LISO"}, {"fornecedor_grupo": "LITORAL", "produto": "20000", "descricao": "ALFAIATARIA BARBIE", "cod_prod_erp": "14527", "nome_prod_erp": "ALFAIATARIA NEW LOOK - LISO"}, {"fornecedor_grupo": "LITORAL", "produto": "30000", "descricao": "ALFAIATARIA BARBIE BRANCO", "cod_prod_erp": "14527", "nome_prod_erp": "ALFAIATARIA NEW LOOK - LISO"}, {"fornecedor_grupo": "EURO", "produto": "3831103", "descricao": "ALFAIATARIA NEW LOOK DIGITAL ESTAMP 1.47L 90% POLYES 10%ELAS", "cod_prod_erp": "14527", "nome_prod_erp": "ALFAIATARIA NEW LOOK - LISO"}, {"fornecedor_grupo": "EURO", "produto": "4792103", "descricao": "ALFAIATARIA NEW LOOK NEON TINTO 1.47L 90% POLY 10% ELAST", "cod_prod_erp": "14527", "nome_prod_erp": "ALFAIATARIA NEW LOOK - LISO"}, {"fornecedor_grupo": "EURO", "produto": "5213103", "descricao": "ALFAIATARIA NEW LOOK TINTO 1,50L 90% POLYESTER 10% ELASTANO", "cod_prod_erp": "14527", "nome_prod_erp": "ALFAIATARIA NEW LOOK - LISO"}, {"fornecedor_grupo": "EURO", "produto": "3376100", "descricao": "ALFAIATARIA NEW LOOK TINTO 1.47L 90% POLIE 10% ELAST 180GR/M", "cod_prod_erp": "14527", "nome_prod_erp": "ALFAIATARIA NEW LOOK - LISO"}, {"fornecedor_grupo": "EURO", "produto": "3376103", "descricao": "ALFAIATARIA NEW LOOK TINTO 1.47L 90% POLY 10% ELAST", "cod_prod_erp": "14527", "nome_prod_erp": "ALFAIATARIA NEW LOOK - LISO"}, {"fornecedor_grupo": "EURO", "produto": "5213100", "descricao": "ALFAIATARIA NEW LOOK TINTO 1.50L 90% POLY 10% ELAST", "cod_prod_erp": "14527", "nome_prod_erp": "ALFAIATARIA NEW LOOK - LISO"}, {"fornecedor_grupo": "LITORAL", "produto": "5350000", "descricao": "NUDE SPAN", "cod_prod_erp": "15428", "nome_prod_erp": "PRADA"}, {"fornecedor_grupo": "LITORAL", "produto": "19220000", "descricao": "NUDE SPAN", "cod_prod_erp": "15428", "nome_prod_erp": "PRADA"}, {"fornecedor_grupo": "LITORAL", "produto": "19230000", "descricao": "NUDE SPAN", "cod_prod_erp": "15428", "nome_prod_erp": "PRADA"}, {"fornecedor_grupo": "LITORAL", "produto": "54220000", "descricao": "NUDE SPAN", "cod_prod_erp": "15428", "nome_prod_erp": "PRADA"}, {"fornecedor_grupo": "LITORAL", "produto": "54210000", "descricao": "NUDE SPAN", "cod_prod_erp": "15428", "nome_prod_erp": "PRADA"}, {"fornecedor_grupo": "LITORAL", "produto": "13500000", "descricao": "NUDE SPAN BRANCO", "cod_prod_erp": "15428", "nome_prod_erp": "PRADA"}, {"fornecedor_grupo": "EURO", "produto": "404103", "descricao": "PRADA 1.47L 96% POLIESTER 4% ELASTANO - 221GR/M2", "cod_prod_erp": "15428", "nome_prod_erp": "PRADA"}, {"fornecedor_grupo": "EURO", "produto": "404100", "descricao": "PRADA 1.47L 96% POLIESTER 4% ELASTANO - 221GR/M2", "cod_prod_erp": "15428", "nome_prod_erp": "PRADA"}, {"fornecedor_grupo": "EURO", "produto": "4566103", "descricao": "PRADA TWILL TINTO 1,47L 96% POLYESTER 4% ELASTANO", "cod_prod_erp": "15428", "nome_prod_erp": "PRADA"}];

const users = {
    'admin': { senha: '123456', nome: 'Admin' },
    'felipe': { senha: 'emporio2025', nome: 'Felipe' },
    'operador1': { senha: 'op123', nome: 'Operador 1' },
    'operador2': { senha: 'op123', nome: 'Operador 2' },
};

const prodIndex = {};
PRODUTOS_DB.forEach(p => { prodIndex[p.produto] = p; });

let userLogado = null;
let prodAtual = null;
let entradas = [];
let stream = null;
let scanAtivo = false;
let ultimoQR = null;
let ultimoTempo = 0;

function salvarBackup() {
    localStorage.setItem('inv_backup', JSON.stringify({
        usuario: userLogado,
        entradas: entradas,
        timestamp: new Date().toISOString()
    }));
}

function recuperarBackup() {
    const backup = localStorage.getItem('inv_backup');
    if (backup) {
        const data = JSON.parse(backup);
        const minutos = Math.round((new Date() - new Date(data.timestamp)) / 60000);
        if (minutos < 60 && confirm(`Recuperar sess√£o de ${data.usuario.nome} (${minutos} min atr√°s)?`)) {
            entradas = data.entradas;
            atualizarContador();
        }
    }
}

// LOGIN
function login() {
    const u = document.getElementById('usuario').value.trim().toLowerCase();
    const s = document.getElementById('senha').value;
    
    if (users[u] && users[u].senha === s) {
        userLogado = { user: u, nome: users[u].nome };
        document.getElementById('telaLogin').classList.add('hidden');
        document.getElementById('telaInstrucoes').classList.remove('hidden');
        document.getElementById('nomeUserInst').textContent = userLogado.nome;
        document.getElementById('nomeUser').textContent = userLogado.nome;
        
        recuperarBackup();
    } else {
        document.getElementById('erroLogin').classList.remove('hidden');
    }
}

document.getElementById('senha').onkeypress = (e) => {
    if (e.key === 'Enter') login();
};

function voltarLogin() {
    document.getElementById('telaInstrucoes').classList.add('hidden');
    document.getElementById('telaLogin').classList.remove('hidden');
}

function iniciarLeitura() {
    document.getElementById('telaInstrucoes').classList.add('hidden');
    document.getElementById('telaMain').classList.remove('hidden');
    iniciarCamera();
}

// C√ÇMERA
async function iniciarCamera() {
    try {
        stream = await navigator.mediaDevices.getUserMedia({ 
            video: { 
                facingMode: 'environment',
                width: { ideal: 1920 },
                height: { ideal: 1080 }
            }
        });
        
        const video = document.getElementById('video');
        video.srcObject = stream;
        
        video.onloadedmetadata = () => {
            video.play();
            scanAtivo = true;
            requestAnimationFrame(tick);
        };
        
    } catch (err) {
        mostrarToast('‚ùå Erro ao acessar c√¢mera: ' + err.message, true);
        console.error('Camera error:', err);
    }
}

function pararCamera() {
    scanAtivo = false;
    if (stream) {
        stream.getTracks().forEach(track => track.stop());
    }
}

function tick() {
    const video = document.getElementById('video');
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    
    if (video.readyState === video.HAVE_ENOUGH_DATA && scanAtivo) {
        canvas.height = video.videoHeight;
        canvas.width = video.videoWidth;
        ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
        
        const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
        const code = jsQR(imageData.data, imageData.width, imageData.height);
        
        if (code) {
            const agora = Date.now();
            if (code.data === ultimoQR && (agora - ultimoTempo) < 2000) {
                requestAnimationFrame(tick);
                return;
            }
            
            ultimoQR = code.data;
            ultimoTempo = agora;
            
            processar(code.data);
            return;
        }
    }
    
    if (scanAtivo) {
        requestAnimationFrame(tick);
    }
}

function processar(qr) {
    const resultado = decodificar(qr);
    
    if (resultado.erro) {
        feedbackErro();
        mostrarToast(resultado.erro, true);
        setTimeout(() => scanAtivo && requestAnimationFrame(tick), 2000);
        return;
    }
    
    const duplicado = entradas.find(e => e.codigo === resultado.codigo);
    if (duplicado) {
        feedbackErro();
        const idx = entradas.indexOf(duplicado) + 1;
        mostrarToast(`‚ö†Ô∏è J√° registrado! (#${idx})`, true);
        setTimeout(() => scanAtivo && requestAnimationFrame(tick), 2000);
        return;
    }
    
    feedbackSucesso();
    pararCamera();
    prodAtual = resultado;
    mostrarModal(resultado);
}

function feedbackSucesso() {
    if (navigator.vibrate) {
        navigator.vibrate([100, 50, 100]);
    }
    try {
        const ctx = new (window.AudioContext || window.webkitAudioContext)();
        const osc = ctx.createOscillator();
        osc.frequency.value = 800;
        osc.connect(ctx.destination);
        osc.start();
        osc.stop(ctx.currentTime + 0.1);
    } catch(e) {}
}

function feedbackErro() {
    if (navigator.vibrate) {
        navigator.vibrate([200, 100, 200]);
    }
}

function mostrarToast(msg, erro = false) {
    const toast = document.createElement('div');
    toast.className = 'toast' + (erro ? ' error' : '');
    toast.textContent = msg;
    document.body.appendChild(toast);
    
    setTimeout(() => {
        toast.style.animation = 'toastIn 0.3s reverse';
        setTimeout(() => toast.remove(), 300);
    }, 2000);
}

function decodificar(qr) {
    const tam = qr.length;
    
    if (tam === 33) {
        const cod = qr.substring(5, 13);
        const qtd = parseFloat(qr.substring(14, 19));
        const prod = buscarProd(cod);
        
        if (!prod) return { erro: `‚ùå Produto ${cod} n√£o encontrado` };
        
        return {
            fornecedor: 'LITORAL',
            codigo: cod,
            quantidade_mt: qtd,
            controle: qr.substring(19, 33),
            ...prod,
            requer_cor: true
        };
    }
    else if (tam === 45 && qr.startsWith('01')) {
        const cod = qr.substring(12, 18);
        const cor = qr.substring(27, 30).replace(/^0+/, '');
        const qtd = parseFloat(qr.substring(37, 42));
        const prod = buscarProd(cod);
        
        if (!prod) return { erro: `‚ùå Produto ${cod} n√£o encontrado` };
        
        return {
            fornecedor: 'EUROTEXTIL',
            codigo: cod,
            quantidade_mt: qtd,
            cor: `#${cor}`,
            po: qr.substring(2, 8),
            seq: qr.substring(31, 36).replace(/^0+/, ''),
            ...prod,
            requer_cor: false
        };
    }
    
    return { erro: `‚ùå C√≥digo inv√°lido (${tam} d√≠gitos)` };
}

function buscarProd(cod) {
    if (prodIndex[cod]) return prodIndex[cod];
    const base = cod.substring(0, 4);
    for (let c in prodIndex) {
        if (c.substring(0, 4) === base) return prodIndex[c];
    }
    return null;
}

function mostrarModal(p) {
    const badge = p.fornecedor === 'LITORAL' ? 
        '<span class="badge badge-litoral">LITORAL</span>' :
        '<span class="badge badge-euro">EUROTEXTIL</span>';
    
    document.getElementById('badgeProd').innerHTML = badge;
    document.getElementById('pCodigo').textContent = p.codigo;
    document.getElementById('pDesc').textContent = p.descricao;
    document.getElementById('pQtd').textContent = `${p.quantidade_mt} MT`;
    document.getElementById('pCat').textContent = p.nome_prod_erp;
    
    const corBox = document.getElementById('corBox');
    if (p.requer_cor) {
        corBox.classList.remove('hidden');
        setTimeout(() => {
            const input = document.getElementById('corInput');
            input.value = '';
            input.focus();
        }, 300);
    } else {
        corBox.classList.add('hidden');
    }
    
    document.getElementById('modalProduto').classList.remove('hidden');
}

function registrar() {
    if (!prodAtual) return;
    
    if (prodAtual.requer_cor) {
        const cor = document.getElementById('corInput').value.trim().toUpperCase();
        if (!cor) {
            mostrarToast('‚ö†Ô∏è Digite a cor!', true);
            document.getElementById('corInput').focus();
            return;
        }
        prodAtual.cor = cor;
    }
    
    entradas.push({
        ...prodAtual,
        timestamp: new Date(),
        usuario: userLogado.nome
    });
    
    salvarBackup();
    atualizarContador();
    mostrarToast('‚úÖ Registrado!');
    
    document.getElementById('modalProduto').classList.add('hidden');
    prodAtual = null;
    
    setTimeout(() => iniciarCamera(), 500);
}

function atualizarContador() {
    document.getElementById('contNum').textContent = entradas.length;
}

function sair() {
    if (entradas.length > 0) {
        if (confirm(`${entradas.length} itens registrados. Gerar relat√≥rio?`)) {
            finalizar();
            return;
        }
    }
    if (confirm('Sair?')) {
        pararCamera();
        location.reload();
    }
}

function finalizar() {
    if (entradas.length === 0) {
        mostrarToast('‚ö†Ô∏è Nenhuma entrada!', true);
        return;
    }
    
    pararCamera();
    gerarRelatorio();
    document.getElementById('telaMain').classList.add('hidden');
    document.getElementById('telaRelatorio').classList.remove('hidden');
}

function gerarRelatorio() {
    const total = entradas.length;
    const metros = entradas.reduce((sum, e) => sum + e.quantidade_mt, 0);
    
    document.getElementById('relOp').textContent = userLogado.nome;
    document.getElementById('relData').textContent = new Date().toLocaleString('pt-BR');
    document.getElementById('relTotalItens').textContent = total;
    document.getElementById('relTotalMts').textContent = metros.toFixed(2);
    
    const tbody = document.getElementById('relBody');
    tbody.innerHTML = '';
    
    entradas.forEach((e, i) => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
            <td>${i + 1}</td>
            <td>${e.codigo} - ${e.descricao.substring(0, 30)}</td>
            <td>${e.cor}</td>
            <td style="text-align: right; font-weight: bold;">${e.quantidade_mt}</td>
        `;
        tbody.appendChild(tr);
    });
}

function exportarCSV() {
    let csv = 'Seq,Fornecedor,Codigo,Descricao,Cor,Quantidade_MT,Usuario,Timestamp\n';
    entradas.forEach((e, i) => {
        csv += `${i+1},${e.fornecedor},${e.codigo},"${e.descricao}",${e.cor},${e.quantidade_mt},${e.usuario},${e.timestamp.toLocaleString('pt-BR')}\n`;
    });
    
    const blob = new Blob([csv], { type: 'text/csv' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `inventario_${new Date().toISOString().split('T')[0]}.csv`;
    a.click();
    
    mostrarToast('‚úÖ CSV exportado!');
}

function novaSessao() {
    if (confirm('Limpar tudo e come√ßar novo invent√°rio?')) {
        localStorage.removeItem('inv_backup');
        location.reload();
    }
}
    </script>
</body>
</html>
